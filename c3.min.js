(function(e){"use strict";function r(e){return e||e===0}function i(e){return typeof e==="undefined"}function s(e){return typeof e!=="undefined"}function o(e,t){function p(e,t){e.attr("transform",function(e){return"translate("+Math.ceil(t(e)+l)+", 0)"})}function d(e,t){e.attr("transform",function(e){return"translate(0,"+Math.ceil(t(e))+")"})}function v(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function m(e){var t,n,r=[];if(e.ticks){return e.ticks.apply(e,f)}n=e.domain();for(t=Math.ceil(n[0]);t<n[1];t++){r.push(t)}if(r.length>0&&r[0]>0){r.unshift(r[0]-(r[1]-r[0]))}return r}function g(){var e=n.copy(),r;if(t){r=n.domain();e.domain([r[0],r[1]-1])}return e}function y(e){return a?a(e):e}function b(a){a.each(function(){function P(e){var t=n(e)+l;return C[0]<t&&t<C[1]?i:0}var a=e.select(this);var f=this.__chart__||n,c=this.__chart__=g();var b=u?u:m(c),w=a.selectAll(".tick").data(b,c),E=w.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),S=w.exit().remove(),x=e.transition(w).style("opacity",1),T,N;var C=n.rangeExtent?n.rangeExtent():v(n.range()),k=a.selectAll(".domain").data([0]),L=(k.enter().append("path").attr("class","domain"),e.transition(k));E.append("line");E.append("text");var A=E.select("line"),O=x.select("line"),M=w.select("text").text(y),_=E.select("text"),D=x.select("text");if(t){l=Math.ceil((c(1)-c(0))/2);N=h?0:l}else{l=N=0}switch(r){case"bottom":{T=p;A.attr("y2",i);_.attr("y",Math.max(i,0)+o);O.attr("x1",N).attr("x2",N).attr("y2",P);D.attr("x",0).attr("y",Math.max(i,0)+o);M.attr("dy",".71em").style("text-anchor","middle");L.attr("d","M"+C[0]+","+s+"V0H"+C[1]+"V"+s);break};case"top":{T=p;A.attr("y2",-i);_.attr("y",-(Math.max(i,0)+o));O.attr("x2",0).attr("y2",-i);D.attr("x",0).attr("y",-(Math.max(i,0)+o));M.attr("dy","0em").style("text-anchor","middle");L.attr("d","M"+C[0]+","+ -s+"V0H"+C[1]+"V"+ -s);break};case"left":{T=d;A.attr("x2",-i);_.attr("x",-(Math.max(i,0)+o));O.attr("x2",-i).attr("y2",0);D.attr("x",-(Math.max(i,0)+o)).attr("y",l);M.attr("dy",".32em").style("text-anchor","end");L.attr("d","M"+ -s+","+C[0]+"H0V"+C[1]+"H"+ -s);break};case"right":{T=d;A.attr("x2",i);_.attr("x",Math.max(i,0)+o);O.attr("x2",i).attr("y2",0);D.attr("x",Math.max(i,0)+o).attr("y",0);M.attr("dy",".32em").style("text-anchor","start");L.attr("d","M"+s+","+C[0]+"H0V"+C[1]+"H"+s);break}}if(c.rangeBand){var H=c,B=H.rangeBand()/2;f=c=function(e){return H(e)+B}}else if(f.rangeBand){f=c}else{S.call(T,c)}E.call(T,f);x.call(T,c)})}var n=e.scale.linear(),r="bottom",i=6,s=6,o=3,u=null,a,f;var l=0,c=true,h;b.scale=function(e){if(!arguments.length){return n}n=e;return b};b.orient=function(e){if(!arguments.length){return r}r=e in{top:1,right:1,bottom:1,left:1}?e+"":"bottom";return b};b.tickFormat=function(e){if(!arguments.length){return a}a=e;return b};b.tickCentered=function(e){if(!arguments.length){return h}h=e;return b};b.tickOffset=function(){return l};b.ticks=function(){if(!arguments.length){return f}f=arguments;return b};b.tickCulling=function(e){if(!arguments.length){return c}c=e;return b};b.tickValues=function(e){if(!arguments.length){return u}u=e;return b};return b}var t={version:"0.2.4"};var n={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",region:"c3-region",regions:"c3-regions",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"};t.generate=function(t){function l(e,n){if(!(e in t)){throw Error(n)}}function c(e,n){var r=t,i,s,o;for(i=0;i<e.length;i++){if(typeof r==="object"&&!(e[i]in r)){return n}s=i===e.length-1;o=r[e[i]];if(!s&&typeof o!=="object"){return n}r=o}return r}function pi(t){var n=e.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0;return"url("+(n?"":document.URL.split("#")[0])+"#"+t+")"}function di(e){return Math.ceil(e)+.5}function vi(e,t){var r,i,s;if(t&&t.axisX){r=t.axisX}else{r=Uf.select("."+n.axisX);if(e){r=r.transition()}}if(t&&t.axisY){i=t.axisY}else{i=Uf.select("."+n.axisY);if(e){i=i.transition()}}if(t&&t.axisY2){s=t.axisY2}else{s=Uf.select("."+n.axisY2);if(e){s=s.transition()}}(e?Uf.transition():Uf).attr("transform",ri.main);r.attr("transform",ri.x);i.attr("transform",ri.y);s.attr("transform",ri.y2);Uf.select("."+n.chartArcs).attr("transform",ri.arc)}function mi(e,t){var r;if(t&&t.axisSubX){r=t.axisSubX}else{r=zf.select("."+n.axisX);if(e){r=r.transition()}}zf.attr("transform",ri.context);r.attr("transform",ri.subx)}function gi(e){(e?Wf.transition():Wf).attr("transform",ri.legend)}function yi(e,t){vi(e,t);if(it){mi(e,t)}gi(e)}function Si(){var e=es(),t=Zi(),n=ii||si?0:e,r=La(a.data.targets),i=bt||r?0:Di("x"),s=it&&!r?st+i:0;xr=Ci();Tr=ki();if(bt){mr={top:Di("y2")+Li(),right:r?0:Mi(),bottom:Di("y")+n+Ai(),left:s+(r?0:Oi())};gr={top:mr.top,right:NaN,bottom:20+n,left:bi}}else{mr={top:4+Li(),right:r?0:Mi(),bottom:i+s+n+Ai(),left:r?0:Oi()};gr={top:Tr-s-n,right:NaN,bottom:i+n,left:mr.left}}var o={top:oi?Li()+pt+5.5:Tr-e-Ai()-pt,left:ui?Oi()+ht+.5:xr-t-Mi()-ht+.5};yr={top:ii?0:si?o.top:Tr-e,right:NaN,bottom:0,left:ii?xr-t:si?o.left:0};br=xr-mr.left-mr.right;Er=Tr-mr.top-mr.bottom;if(br<0){br=0}if(Er<0){Er=0}wr=bt?mr.left-bi-wi:br;Sr=bt?Er:Tr-gr.top-gr.bottom;if(wr<0){wr=0}if(Sr<0){Sr=0}Lr=br-(ii?t+10:0);Ar=Er-(ii?0:10);Ti();if(ii&&r){yr.left=Lr/2+Cr*1.1}}function xi(){Uf.select("line."+n.xgridFocus).attr("x1",bt?0:-10).attr("x2",bt?br:-10).attr("y1",bt?-10:0).attr("y2",bt?-10:Er)}function Ti(){var e;Cr=Math.min(Lr,Ar)/2;Nr=Cr*.95;e=Mn?(Nr-Mn)/Nr:.6;kr=ka(a.data.targets)||Ca(a.data.targets)?Nr*e:0}function Ni(){var e=bt?n.axisX:n.axisY,t=Uf.select("."+e).node(),r=t?t.getBoundingClientRect():{right:0},i=Vf.node().getBoundingClientRect(),s=La(a.data.targets),o=r.right-i.left-(s?0:Oi());return o>0?o:0}function Ci(){return p?p:Hi()}function ki(){var e=d?d:Bi();return e>0?e:320}function Li(){return r(g)?g:0}function Ai(){return r(y)?y:0}function Oi(){if(r(v)){return v}else if(bt){return!wt?1:Math.max(sf(_i("x")),40)}else{return!Ft||zt?1:sf(_i("y"))}}function Mi(){var e=10,t=ii?Zi()+20:0;if(r(m)){return m+1}else if(bt){return e+t}else{return(!$t||Yt?e:sf(_i("y2")))+t}}function _i(e){var t=Ss(e);return t.isInner?20+Rs(e):40+Rs(e)}function Di(e){if(e==="x"&&!wt){return 0}if(e==="x"&&Ht){return Ht}if(e==="y"&&!Ft){return ft&&!ii&&!si?10:1}if(e==="y2"&&!$t){return Ei}return(Ss(e).isInner?30:40)+(e==="y2"?-10:0)}function Pi(e){var t=Vf.node(),n;while(t&&t.tagName!=="BODY"){n=t.getBoundingClientRect()[e];if(n){break}t=t.parentNode}return n}function Hi(){return Pi("width")}function Bi(){var e=Vf.style("height");return e.indexOf("px")>0?+e.replace("px",""):0}function ji(e){return e?-(1+30):-(mr.left-1)}function Fi(e){return e?-20:-4}function Ii(){return ji(!bt)}function qi(){return Fi(!bt)}function Ri(){return ji(bt)}function Ui(){return Fi(bt)}function zi(e){return e?br+2+30+30:mr.left+20}function Wi(e){return e?(Ht?Ht:0)+80:Er+8}function Xi(){return zi(!bt)}function Vi(){return Wi(!bt)}function $i(){return zi(bt)}function Ji(){return Wi(bt)}function Ki(){var e=Vo(a.data.targets),t,n,r,i,s,o;if(!e){return 0}t=e.values[0],n=e.values[e.values.length-1];r=Ur(n.x)-Ur(t.x);if(r===0){return bt?Er:br}i=Xo();s=xa(a.data.targets)?(i-(tr?.25:1))/i:1;o=i>1?r*s/(i-1):r;return o<1?1:o}function Qi(e){ai=e}function Gi(e){fi=e}function Yi(e){li=e}function Zi(){return ft?ii||si?fi*(ai+1):xr:0}function es(){var e=0;if(ft){if(ii){e=Tr}else if(si){e=dt?Math.max(20,li)*(dt+1):Er}else{e=Math.max(20,li)*(ai+1)}}return e}function ts(){var e,t,n=!Ur;Pr=bt?1:0;Hr=bt?Er:br;Br=bt?0:Er;jr=bt?br:1;Fr=Pr;Ir=Hr;qr=bt?0:Sr;Rr=bt?wr:1;Ur=is(Pr,Hr,n?undefined:Ur.orgDomain(),function(){return Jr.tickOffset()});zr=ss(Br,jr,n?undefined:zr.domain());Wr=ss(Br,jr,n?undefined:Wr.domain());Xr=is(Pr,Hr,$f,function(e){return e%1?0:Gr.tickOffset()});Vr=ss(qr,Rr,n?undefined:Vr.domain());$r=ss(qr,Rr,n?undefined:$r.domain());e=cs();t=Ot?Ot:n?undefined:Jr.tickValues();Jr=as(Ur,Zr,e,t);Gr=as(Xr,ni,e,t);Kr=fs(zr,ei,Wt,Vt);Qr=fs(Wr,ti,Zt,tn);if(!n){jf.scale(Xr);if(b){Ff.scale(Ur)}}ns()}function ns(){Or=Xs();Mr=Vs();_r=Vs(.98)}function rs(e,t,n){return(n?u.time.scale():u.scale.linear()).range([e,t])}function is(e,t,n,r){var i=rs(e,t,er),s=n?i.domain(n):i,o;if(tr){r=r||function(){return 0};i=function(e,t){var n=s(e)+r(e);return t?n:Math.ceil(n)}}else{i=function(e,t){var n=s(e);return t?n:Math.ceil(n)}}for(o in s){i[o]=s[o]}i.orgDomain=function(){return s.domain()};if(tr){i.domain=function(e){if(!arguments.length){e=this.orgDomain();return[e[0],e[1]+1]}s.domain(e);return i}}return i}function ss(e,t,n){var r=rs(e,t);if(n){r.domain(n)}return r}function os(e){return ls(e)==="y2"?Wr:zr}function us(e){return ls(e)==="y2"?$r:Vr}function as(e,t,n,r){var i=o(u,tr).scale(e).orient(t);i.tickFormat(n).tickValues(r);if(tr){i.tickCentered(Tt);if(Ga(Ct)){Ct=false}}else{i.tickOffset=function(){var e=$o(a.data.targets),t=Ur(e[1])-Ur(e[0]),n=t?t:bt?Er:br;return n/Xo()/2}}return i}function fs(e,t,n,r){return o(u).scale(e).orient(t).tickFormat(n).ticks(r)}function ls(e){return e in B?B[e]:"y"}function cs(){var e=er?pr:tr?lu:function(e){return e<0?e.toFixed(0):e};if(Nt){if(typeof Nt==="function"){e=Nt}else if(er){e=function(e){return e?hr(Nt)(e):""}}}return e}function hs(e){var t;if(e==="y"){t=Ut}else if(e==="y2"){t=Gt}else if(e==="x"){t=jt}return t}function ps(e){var t=hs(e);return typeof t==="string"?t:t?t.text:null}function ds(e,t){var n=hs(e);if(typeof n==="string"){if(e==="y"){Ut=t}else if(e==="y2"){Gt=t}else if(e==="x"){jt=t}}else if(n){n.text=t}}function vs(e){return 10*Math.sin(Math.PI*(e/180))}function ms(e){return 11.5-2.5*(e/15)}function gs(e,t,n){e.selectAll(".tick text").style("text-anchor","start");t.selectAll(".tick text").attr("y",ms(n)).attr("x",vs(n)).attr("transform","rotate("+n+")")}function ys(e,t){var n=hs(e),r=n&&typeof n==="object"&&n.position?n.position:t;return{isInner:r.indexOf("inner")>=0,isOuter:r.indexOf("outer")>=0,isLeft:r.indexOf("left")>=0,isCenter:r.indexOf("center")>=0,isRight:r.indexOf("right")>=0,isTop:r.indexOf("top")>=0,isMiddle:r.indexOf("middle")>=0,isBottom:r.indexOf("bottom")>=0}}function bs(){return ys("x",bt?"inner-top":"inner-right")}function ws(){return ys("y",bt?"inner-right":"inner-top")}function Es(){return ys("y2",bt?"inner-right":"inner-top")}function Ss(e){return e==="y2"?Es():e==="y"?ws():bs()}function xs(){return ps("x")}function Ts(){return ps("y")}function Ns(){return ps("y2")}function Cs(e,t){if(e){return t.isLeft?0:t.isCenter?br/2:br}else{return t.isBottom?-Er:t.isMiddle?-Er/2:0}}function ks(e,t){if(e){return t.isLeft?"0.5em":t.isRight?"-0.5em":"0"}else{return t.isTop?"-0.5em":t.isBottom?"0.5em":"0"}}function Ls(e,t){if(e){return t.isLeft?"start":t.isCenter?"middle":"end"}else{return t.isBottom?"start":t.isMiddle?"middle":"end"}}function As(){return Cs(!bt,bs())}function Os(){return Cs(bt,ws())}function Ms(){return Cs(bt,Es())}function _s(){return ks(!bt,bs())}function Ds(){return ks(bt,ws())}function Ps(){return ks(bt,Es())}function Hs(){var e=bs();if(bt){return e.isInner?"1.2em":-25-Rs("x")}else{return e.isInner?"-0.5em":Ht?Ht-10:"3em"}}function Bs(){var e=ws();if(bt){return e.isInner?"-0.5em":"3em"}else{return e.isInner?"1.2em":-20-Rs("y")}}function js(){var e=Es();if(bt){return e.isInner?"1.2em":"-2.2em"}else{return e.isInner?"-0.5em":30+Rs("y2")}}function Fs(){return Ls(!bt,bs())}function Is(){return Ls(bt,ws())}function qs(){return Ls(bt,Es())}function Rs(e){var t=0,n,r,i;if(qf){n=Zo(a.data.targets);if(e==="y"){r=zr.copy().domain(uo(n,"y"));i=fs(r,ei,Wt,Vt)}else if(e==="y2"){r=Wr.copy().domain(uo(n,"y2"));i=fs(r,ti,Zt,tn)}else{r=Ur.copy().domain(co(n));i=as(r,Zr,cs(),Ot?Ot:Jr.tickValues())}Uf.append("g").call(i).each(function(){u.select(this).selectAll("text").each(function(){var e=this.getBoundingClientRect();if(t<e.width){t=e.width}})}).remove()}hi=t<=0?hi:t;return hi}function Us(e){var t=Uf.select("."+n.axisX+" ."+n.axisXLabel),r=Uf.select("."+n.axisY+" ."+n.axisYLabel),i=Uf.select("."+n.axisY2+" ."+n.axisY2Label);(e?t.transition():t).attr("x",As).attr("dx",_s).attr("dy",Hs).text(xs);(e?r.transition():r).attr("x",Os).attr("dx",Ds).attr("dy",Bs).attr("dy",Bs).text(Ts);(e?i.transition():i).attr("x",Ms).attr("dx",Ps).attr("dy",js).text(Ns)}function zs(e,t){return e.startAngle-t.startAngle}function Ws(e){var t=false,n=0;Dr(Zo(a.data.targets)).sort(zs).forEach(function(r){if(!t&&r.data.id===e.data.id){t=true;e=r;e.index=n}n++});if(isNaN(e.endAngle)){e.endAngle=e.startAngle}if(Ba(e.data)){var r=Ln,i=An,s=Math.abs(r)+i,o=Math.PI/s;e.startAngle=-1*(Math.PI/2)+o*Math.abs(r);e.endAngle=e.startAngle+o*(e.value>i?i:e.value)}return t?e:null}function Xs(){var e=u.svg.arc().outerRadius(Nr).innerRadius(kr),t=function(t,n){var r;if(n){return e(t)}r=Ws(t);return r?e(r):"M 0 0"};t.centroid=e.centroid;return t}function Vs(e){var t=u.svg.arc().outerRadius(Cr*(e?e:1)).innerRadius(kr);return function(e){var n=Ws(e);return n?t(n):"M 0 0"}}function $s(e,t,n){return n||Fa(e.data)?Or(e,t):"M 0 0"}function Js(e){var t=Ws(e),n,r,i,s,o,u="";if(t&&!Ca(a.data.targets)){n=Or.centroid(t);r=isNaN(n[0])?0:n[0];i=isNaN(n[1])?0:n[1];s=Math.sqrt(r*r+i*i);o=Nr&&s?(36/Nr>.375?1.175-36/Nr:.8)*Nr/s:0;u="translate("+r*o+","+i*o+")"}return u}function Ks(e){var t=Ca(a.data.targets)?Math.PI:Math.PI*2;return e?(e.endAngle-e.startAngle)/t:null}function Qs(e){return _o({id:e.data.id,value:e.value,ratio:Ks(e),index:e.index})}function Gs(e){var t,n,r,i;if(!eo()){return""}t=Ws(e);n=t?t.value:null;r=Ks(t);if(!Ca(a.data.targets)&&!to(r)){return""}i=no();return i?i(n,r):$u(n,r)}function Ys(e,t){var r=qf.selectAll("."+n.chartArc+Pu(e)),i=qf.selectAll("."+n.arc).filter(function(t){return t.data.id!==e});if(Wa(e)){r.selectAll("path").transition().duration(50).attr("d",Mr).transition().duration(100).attr("d",_r).each(function(e){if(ja(e.data)){}})}if(!t){i.style("opacity",.3)}}function Zs(e){var t=qf.selectAll("."+n.chartArc+Pu(e));t.selectAll("path."+n.arc).transition().duration(50).attr("d",Or);qf.selectAll("."+n.arc).style("opacity",ut)}function eo(){var e=true;if(ka(a.data.targets)){e=_n}else if(Na(a.data.targets)){e=wn}return e}function to(e){var t=ka(a.data.targets)?Pn:Sn;return e>=t}function no(){var e=En;if(Ca(a.data.targets)){e=Cn}else if(ka(a.data.targets)){e=Dn}return e}function ro(){return ka(a.data.targets)?jn:""}function io(e,t,n,i){var s=e.unit==="ratio"?i:1;return r(e[t])?e[t]*s:n}function so(e){var t=Jo(e),n=ou(e),r,i,s,o,a,f;if(H.length>0){f=au(e);for(r=0;r<H.length;r++){o=H[r].filter(function(e){return t.indexOf(e)>=0});if(o.length===0){continue}s=o[0];if(f&&n[s]){n[s].forEach(function(e,t){n[s][t]=e<0?e:0})}for(i=1;i<o.length;i++){a=o[i];if(!n[a]){continue}n[a].forEach(function(e,t){if(ls(a)===ls(s)&&n[s]&&!(f&&+e>0)){n[s][t]+=+e}})}}}return u.min(Object.keys(n).map(function(e){return u.min(n[e])}))}function oo(e){var t=Jo(e),n=ou(e),r,i,s,o,a,f;if(H.length>0){f=fu(e);for(r=0;r<H.length;r++){o=H[r].filter(function(e){return t.indexOf(e)>=0});if(o.length===0){continue}s=o[0];if(f&&n[s]){n[s].forEach(function(e,t){n[s][t]=e>0?e:0})}for(i=1;i<o.length;i++){a=o[i];if(!n[a]){continue}n[a].forEach(function(e,t){if(ls(a)===ls(s)&&n[s]&&!(f&&+e<0)){n[s][t]+=+e}})}}}return u.max(Object.keys(n).map(function(e){return u.max(n[e])}))}function uo(e,t){var n=e.filter(function(e){return ls(e.id)===t}),i=t==="y2"?Kt:qt,s=t==="y2"?Jt:It,o=r(i)?i:so(n),u=r(s)?s:oo(n),a,f,l,c,h=t==="y2"?Qt:Rt,p,d,v,m,g,y,b=xa(n)&&yn||Sa(n)&&bn,w=Ru()&&bt,E=Ru()&&!bt;if(n.length===0){return t==="y2"?Wr.domain():zr.domain()}if(o===u){o<0?u=0:o=0}g=o>=0&&u>=0;y=o<=0&&u<=0;if(b){if(g){o=0}if(y){u=0}}a=Math.abs(u-o);f=l=c=a*.1;if(h){p=Math.max(Math.abs(o),Math.abs(u));u=p-h;o=h-p}if(w){d=Uu(o,u,t,"width");v=po(zr.range());m=[d[0]/v,d[1]/v];l+=a*(m[1]/(1-m[0]-m[1]));c+=a*(m[0]/(1-m[0]-m[1]))}else if(E){d=Uu(o,u,t,"height");l+=d[1];c+=d[0]}if(t==="y"&&Xt){l=io(Xt,"top",f,a);c=io(Xt,"bottom",f,a)}if(t==="y2"&&en){l=io(en,"top",f,a);c=io(en,"bottom",f,a)}if(b){if(g){c=o}if(y){l=-u}}return[o-c,u+l]}function ao(e){return Dt?er?$a(Dt):Dt:u.min(e,function(e){return u.min(e.values,function(e){return e.x})})}function fo(e){return _t?er?$a(_t):_t:u.max(e,function(e){return u.max(e.values,function(e){return e.x})})}function lo(e){var t=$o(e),n=t[1]-t[0],i,s,o,u;if(tr){s=0}else if(xa(e)){i=Xo();s=i>1?n/(i-1)/2:.5}else{s=n*.01}if(typeof Pt==="object"&&Ya(Pt)){o=r(Pt.left)?Pt.left:s;u=r(Pt.right)?Pt.right:s}else if(typeof Pt==="number"){o=u=Pt}else{o=u=s}return{left:o,right:u}}function co(e){var t=[ao(e),fo(e)],n=t[0],r=t[1],i=lo(e),s=0,o=0;if(n-r===0&&!tr){n=er?new Date(n.getTime()*.5):-.5;r=er?new Date(r.getTime()*1.5):.5}if(n||n===0){s=er?new Date(n.getTime()-i.left):n-i.left}if(r||r===0){o=er?new Date(r.getTime()+i.right):r+i.right}return[s,o]}function ho(e,t,n,r){if(n){Ur.domain(r?r:u.extent(co(e)));$f=Ur.domain();if(b){Ff.scale(Ur).updateScaleExtent()}Xr.domain(Ur.domain());jf.scale(Xr)}if(t){Ur.domain(r?r:jf.empty()?$f:jf.extent());if(b){Ff.scale(Ur).updateScaleExtent()}}return Ur.domain()}function po(e){return e[1]-e[0]}function vo(e){for(var t=0;t<e.length;t++){if(!(e[t]in f)){return false}}return true}function mo(e,t){f[e]=Uo(t)}function go(e){var t=[];for(var n=0;n<e.length;n++){if(e[n]in f){t.push(Uo(f[e[n]]))}}return t}function yo(e){var t,n=e.axis==="y"?zr:Wr;if(e.axis==="y"||e.axis==="y2"){t=bt?"start"in e?n(e.start):0:0}else{t=bt?0:"start"in e?Ur(er?$a(e.start):e.start):0}return t}function bo(e){var t,n=e.axis==="y"?zr:Wr;if(e.axis==="y"||e.axis==="y2"){t=bt?0:"end"in e?n(e.end):0}else{t=bt?"start"in e?Ur(er?$a(e.start):e.start):0:0}return t}function wo(e){var t=yo(e),n,r=e.axis==="y"?zr:Wr;if(e.axis==="y"||e.axis==="y2"){n=bt?"end"in e?r(e.end):br:br}else{n=bt?br:"end"in e?Ur(er?$a(e.end):e.end):br}return n<t?0:n-t}function Eo(e){var t=bo(e),n,r=e.axis==="y"?zr:Wr;if(e.axis==="y"||e.axis==="y2"){n=bt?Er:"start"in e?r(e.start):Er}else{n=bt?"end"in e?Ur(er?$a(e.end):e.end):Er:Er}return n<t?0:n-t}function So(e){return!e.axis||e.axis==="x"}function xo(e){return L&&e===L||Ya(A)&&Za(A,e)}function To(e){return!xo(e)}function No(e){return L?L:Ya(A)?A[e]:null}function Co(e,t){var n,r=t&&Ya(t)?Jo(t):[];r.forEach(function(t){if(No(t)===e){n=a.data.xs[t]}});return n}function ko(e,t){return e in a.data.xs&&a.data.xs[e]&&r(a.data.xs[e][t])?a.data.xs[e][t]:t}function Lo(){var e=Object.keys(a.data.xs);return e.length?a.data.xs[e[0]]:null}function Ao(e){var t=Lo();return t&&e<t.length?t[e]:null}function Oo(e){Object.keys(e).forEach(function(t){A[t]=e[t]})}function Mo(e){return u.set(Object.keys(e).map(function(t){return e[t]})).size()===1}function _o(e){var t;if(e){t=D[e.id];e.name=t?t:e.id}return e}function Do(e,t){var n=e.filter(function(e){return e.index===t});return n.length?n[0]:null}function Po(e,t){e.forEach(function(e){e.values.forEach(function(n,r){n.x=Bo(t[r],e.id,r)});a.data.xs[e.id]=t})}function Ho(e,t){e.forEach(function(e){if(t[e.id]){Po([e],t[e.id])}})}function Bo(e,t,n){var i;if(er){i=e?$a(e):$a(ko(t,n))}else if(nr()&&!tr){i=r(e)?+e:ko(t,n)}else{i=n}return i}function jo(e){var t=u.csv.parseRows(e),n;if(t.length===1){n=[{}];t[0].forEach(function(e){n[0][e]=null})}else{n=u.csv.parse(e)}return n}function Fo(e,t){var n=[],r,i;if(t){r=t.value;if(t.x){r.push(t.x);L=t.x}n.push(r);e.forEach(function(e){var t=[];r.forEach(function(n){var r=typeof e[n]==="undefined"?null:e[n];t.push(r)});n.push(t)});i=Io(n)}else{Object.keys(e).forEach(function(t){n.push([t].concat(e[t]))});i=qo(n)}return i}function Io(e){var t=e[0],n={},r=[],i,s;for(i=1;i<e.length;i++){n={};for(s=0;s<e[i].length;s++){n[t[s]]=e[i][s]}r.push(n)}return r}function qo(e){var t=[],n,r,s;for(n=0;n<e.length;n++){s=e[n][0];for(r=1;r<e[n].length;r++){if(i(t[r-1])){t[r-1]={}}t[r-1][s]=e[n][r]}}return t}function Ro(e,t){var n=u.keys(e[0]).filter(To),i=u.keys(e[0]).filter(xo),s;n.forEach(function(n){var s=No(n);if(nr()||er){if(i.indexOf(s)>=0){a.data.xs[n]=(t&&a.data.xs[n]?a.data.xs[n]:[]).concat(e.map(function(e){return e[s]}).filter(r).map(function(e,t){return Bo(e,n,t)}))}else if(L){a.data.xs[n]=Lo()}else if(Ya(A)){a.data.xs[n]=Co(s,a.data.targets)}}else{a.data.xs[n]=e.map(function(e,t){return t})}});n.forEach(function(e){if(!a.data.xs[e]){throw new Error('x is not defined for id = "'+e+'".')}});s=n.map(function(t,n){var r=_(t);return{id:r,id_org:t,values:e.map(function(e,i){var s=No(t),o=e[s],u=Bo(o,t,i);if(nr()&&tr&&n===0&&o){if(i===0){xt=[]}xt.push(o)}if(typeof e[t]==="undefined"||a.data.xs[t].length<=i){u=undefined}return{x:u,value:e[t]!==null&&!isNaN(e[t])?+e[t]:null,id:r}}).filter(function(e){return typeof e.x!=="undefined"})}});s.forEach(function(e){var t;e.values=e.values.sort(function(e,t){var n=e.x||e.x===0?e.x:Infinity,r=t.x||t.x===0?t.x:Infinity;return n-r});t=0;e.values.forEach(function(e){e.index=t++});a.data.xs[e.id].sort(function(e,t){return e-t})});if(j){wa(Jo(s).filter(function(e){return!(e in F)}),j)}s.forEach(function(e){mo(e.id_org,e)});return s}function Uo(e){return{id:e.id,id_org:e.id_org,values:e.values.map(function(e){return{x:e.x,value:e.value,id:e.id}})}}function zo(e){var t=Do(a.data.targets[0].values,e-1);return t?t.x:null}function Wo(e){var t=Do(a.data.targets[0].values,e+1);return t?t.x:null}function Xo(){return u.max(a.data.targets,function(e){return e.values.length})}function Vo(e){var t=e.length,n=0,r;if(t>1){e.forEach(function(e){if(e.values.length>n){r=e;n=e.values.length}})}else{r=t?e[0]:null}return r}function $o(e){var t=Vo(e),n,r;if(!t){return[0,0]}n=t.values[0],r=t.values[t.values.length-1];return[n.x,r.x]}function Jo(e){return e.map(function(e){return e.id})}function Ko(e){return e?typeof e==="string"?[e]:e:Jo(a.data.targets)}function Qo(e,t){var n=Jo(e),r;for(r=0;r<n.length;r++){if(n[r]===t){return true}}return false}function Go(e){return dr.indexOf(e)<0}function Yo(e){return vr.indexOf(e)<0}function Zo(e){return e.filter(function(e){return Go(e.id)})}function eu(e){var t=u.set(u.merge(e.map(function(e){return e.values.map(function(e){return e.x})}))).values();return er?t.map(function(e){return new Date(e)}):t.map(function(e){return+e})}function tu(e,t){var n=e,r,i,s,o,u,a,f;if(t){r=typeof t==="function"?t():t;if(r===1){n=[e[0]]}else if(r===2){n=[e[0],e[e.length-1]]}else if(r>2){o=r-2;i=e[0];s=e[e.length-1];u=(s-i)/(o+1);n=[i];for(a=0;a<o;a++){f=+i+u*(a+1);n.push(er?new Date(f):f)}n.push(s)}}if(!er){n=n.sort(function(e,t){return e-t})}return n}function nu(e){dr=dr.concat(e)}function ru(e){dr=dr.filter(function(t){return e.indexOf(t)<0})}function iu(e){vr=vr.concat(e)}function su(e){vr=vr.filter(function(t){return e.indexOf(t)<0})}function ou(e){var t={};e.forEach(function(e){t[e.id]=[];e.values.forEach(function(n){t[e.id].push(n.value)})});return t}function uu(e,t){var n=Object.keys(e),r,i,s;for(r=0;r<n.length;r++){s=e[n[r]].values;for(i=0;i<s.length;i++){if(t(s[i].value)){return true}}}return false}function au(e){return uu(e,function(e){return e<0})}function fu(e){return uu(e,function(e){return e>0})}function lu(e){return e<xt.length?xt[e]:e}function cu(e,t){return" "+e+" "+e+Du(t)}function hu(e){return cu(n.text,e.index)}function pu(e){return cu(n.texts,e.id)}function du(e){return cu(n.shape,e.index)}function vu(e){return cu(n.shapes,e.id)}function mu(e){return du(e)+cu(n.line,e.id)}function gu(e){return vu(e)+cu(n.lines,e.id)}function yu(e){return du(e)+cu(n.circle,e.index)}function bu(e){return vu(e)+cu(n.circles,e.id)}function wu(e){return du(e)+cu(n.bar,e.index)}function Eu(e){return vu(e)+cu(n.bars,e.id)}function Su(e){return du(e.data)+cu(n.arc,e.data.id)}function xu(e){return vu(e.data)+cu(n.arcs,e.data.id)}function Tu(e){return du(e)+cu(n.area,e.id)}function Nu(e){return vu(e)+cu(n.areas,e.id)}function Cu(e,t){return cu(n.region,t)+" "+("class"in e?e.class:"")}function ku(e){return cu(n.eventRect,e.index)}function Lu(e){var t=P[e],r="";if(t){r=" "+n.target+"-"+t}return cu(n.target,e)+r}function Au(e){return n.chartText+Lu(e.id)}function Ou(e){return n.chartLine+Lu(e.id)}function Mu(e){return n.chartBar+Lu(e.id)}function _u(e){return n.chartArc+Lu(e.data.id)}function Du(e){return e||e===0?"-"+(e.replace?e.replace(/([^a-zA-Z0-9-_])/g,"-"):e):""}function Pu(e){return"."+n.target+Du(e)}function Hu(e){return e.length?e.map(function(e){return Pu(e)}):null}function Bu(e){return"."+n.legendItem+Du(e)}function ju(e){return e.length?e.map(function(e){return Bu(e)}):null}function Fu(e){return e.value!==null&&Kf[e.id]?1:0}function Iu(e){return r(e.value)?Pa(e)?.5:1:0}function qu(){return Ru()?1:0}function Ru(){if(typeof I==="boolean"&&I){return true}else if(typeof I==="object"&&Ya(I)){return true}return false}function Uu(e,t,n,r){var i=[0,0],s=1.3;Vf.select("svg").selectAll(".dummy").data([e,t]).enter().append("text").text(function(e){return Ju(n)(e)}).each(function(e,t){i[t]=this.getBoundingClientRect()[r]*s}).remove();return i}function zu(e){var t=e&&!Ca(a.data.targets)?$u:Wu,n=e&&!Ca(a.data.targets)?$u:Xu;return function(e,r,i){var s=ls(i)==="y2"?n:t;return s(e,r)}}function Wu(e){var t=Wt?Wt:Vu;return t(e)}function Xu(e){var t=Zt?Zt:Vu;return t(e)}function Vu(e){return r(e)?+e:""}function $u(e,t){return(t*100).toFixed(1)+"%"}function Ju(e){var t=function(e){return r(e)?+e:""};if(typeof I.format==="function"){t=I.format}else if(typeof I.format==="object"){if(typeof I.format[e]==="function"){t=I.format[e]}}return t}function Ku(e){return e?Ur(e.x):null}function Qu(e){return Math.ceil(Ur(er?$a(e.value):e.value))}function Gu(e){var t=e.axis&&e.axis==="y2"?Wr:zr;return Math.ceil(t(e.value))}function Yu(e){return e?Xr(e.x):null}function Zu(e,t){var n,r=e[t].x,i=[];for(n=t-1;n>=0;n--){if(r!==e[n].x){break}i.push(e[n])}for(n=t;n<e.length;n++){if(r!==e[n].x){break}i.push(e[n])}return i}function ea(e,t,n,r){var i=n?n:0,s=r?r:e.length-1,o=Math.floor((s-i)/2)+i,u=e[o],a=Ur(u.x)-t[bt?1:0],f;a>0?s=o:i=o;if(s-i===1||i===0&&s===0){f=[];if(e[i].x||e[i].x===0){f=f.concat(Zu(e,i))}if(e[s].x||e[s].x===0){f=f.concat(Zu(e,s))}return na(f,t)}return ea(e,t,i,s)}function ta(e,t){var n;n=e.map(function(e){return ea(e.values,t)});return na(n,t)}function na(e,t){var n,r;e.forEach(function(e){var i=ef(e,t);if(i<n||!n){n=i;r=e}});return r}function ra(e,t){return u.merge(e.map(function(e){return e.values})).filter(function(e){return e.x-t===0})}function ia(e){var t=e.getBoundingClientRect(),n=[e.pathSegList.getItem(0),e.pathSegList.getItem(1)],r=n[0].x,i=Math.min(n[0].y,n[1].y);return{x:r,y:i,width:t.width,height:t.height}}function sa(){return q&&q.toLowerCase()==="desc"}function oa(){return q&&q.toLowerCase()==="asc"}function ua(e){var t=oa(),n=sa();if(t||n){e.sort(function(e,n){var r=function(e,t){return e+Math.abs(t.value)};var i=e.values.reduce(r,0),s=n.values.reduce(r,0);return t?s-i:i-s})}else if(typeof q==="function"){e.sort(q)}return e}function aa(e,t){var n,i,s,o,u,f,l;var c=La(a.data.targets),h=e.filter(function(e){return e&&r(e.value)});if(h.length===0||!In){return}Xf.html(Wn(e,cs(),zu(c),fr)).style("display","block");n=Xf.property("offsetWidth");i=Xf.property("offsetHeight");if(c){o=br/2+t[0];f=Er/2+t[1]+20}else{if(bt){s=Ni();o=s+t[0]+100;u=o+n;l=Ci()-Mi();f=Ur(h[0].x)+20}else{s=Ni();o=s+Oi()+Ur(h[0].x)+20;u=o+n;l=s+Ci()-Mi();f=t[1]+15}if(u>l){o-=u-l}if(f+i>ki()){f-=i+30}}Xf.style("top",f+"px").style("left",o+"px")}function fa(){Xf.style("display","none")}function la(e){var t=e.filter(function(e){return e&&r(e.value)});if(!In){return}if(Ta(a.data.targets)||La(a.data.targets)){return}var i=Uf.selectAll("line."+n.xgridFocus);i.style("visibility","visible").data([t[0]]).attr(bt?"y1":"x1",Ku).attr(bt?"y2":"x2",Ku);sl(i,"grid")}function ca(){Uf.select("line."+n.xgridFocus).style("visibility","hidden")}function ha(e,t){var r=[],i,s,o,u,a=Uf.select("."+n.axisX).selectAll(".tick").size();if(e==="year"){i=co();s=i[0].getFullYear();o=i[1].getFullYear();for(u=s;u<=o;u++){r.push(new Date(u+"-01-01 00:00:00"))}}else{r=t.ticks(10);if(r.length>a){r=r.filter(function(e){return(""+e).indexOf(".")<0})}}return r}function pa(e){var t={},n=0,r,s;Zo(a.data.targets.filter(e)).forEach(function(e){for(r=0;r<H.length;r++){if(H[r].indexOf(e.id)<0){continue}for(s=0;s<H[r].length;s++){if(H[r][s]in t){t[e.id]=t[H[r][s]];break}}}if(i(t[e.id])){t[e.id]=n++}});t.__max__=n-1;return t}function da(e,t,n,r){var i=r?Xr:Ur;return function(r){var s=r.id in n?n[r.id]:0;return r.x||r.x===0?i(r.x)-e*(t/2-s):0}}function va(e){return function(t){var n=e?us(t.id):os(t.id);return n(t.value)}}function ma(e,t,n){var r=ua(Zo(a.data.targets.filter(e))),i=r.map(function(e){return e.id});return function(e,s){var o=n?us(e.id):os(e.id),u=o(0),a=u;r.forEach(function(n){if(n.id===e.id||t[n.id]!==t[e.id]){return}if(i.indexOf(n.id)<i.indexOf(e.id)&&n.values[s].value*e.value>=0){a+=o(n.values[s].value)-u}});return a}}function ga(e){return e.x||e.x===0?Ur(e.x):null}function ya(e,t){var n=pa(Aa),r=Hf(n);return H.length>0?r(e,t)[0][1]:os(e.id)(e.value)}function ba(e,t){return typeof mn==="number"?mn:t?e.tickOffset()*2*gn/t:0}function wa(e,t){Ko(e).forEach(function(e){Kf[e]=t===F[e];F[e]=t});if(!e){j=t}}function Ea(e,t){var n=false;e.forEach(function(e){if(F[e.id]===t){n=true}if(!(e.id in F)&&t==="line"){n=true}});return n}function Sa(e){return Ea(e,"area")||Ea(e,"area-spline")||Ea(e,"area-step")}function xa(e){return Ea(e,"bar")}function Ta(e){return Ea(e,"scatter")}function Na(e){return j==="pie"||Ea(e,"pie")}function Ca(e){return Ea(e,"gauge")}function ka(e){return j==="donut"||Ea(e,"donut")}function La(e){return Na(e)||ka(e)||Ca(e)}function Aa(e){var t=typeof e==="string"?e:e.id;return!F[t]||["line","spline","area","area-spline","step","area-step"].indexOf(F[t])>=0}function Oa(e){var t=typeof e==="string"?e:e.id;return["step","area-step"].indexOf(F[t])>=0}function Ma(e){var t=typeof e==="string"?e:e.id;return["spline","area-spline"].indexOf(F[t])>=0}function _a(e){var t=typeof e==="string"?e:e.id;return["area","area-spline","area-step"].indexOf(F[t])>=0}function Da(e){var t=typeof e==="string"?e:e.id;return F[t]==="bar"}function Pa(e){var t=typeof e==="string"?e:e.id;return F[t]==="scatter"}function Ha(e){var t=typeof e==="string"?e:e.id;return F[t]==="pie"}function Ba(e){var t=typeof e==="string"?e:e.id;return F[t]==="gauge"}function ja(e){var t=typeof e==="string"?e:e.id;return F[t]==="donut"}function Fa(e){return Ha(e)||ja(e)||Ba(e)}function Ia(e){return Aa(e)?[e]:[]}function qa(e){return Fa(e.data)?[e]:[]}function Ra(e){return Da(e)?e.values:[]}function Ua(e){return Aa(e)||Pa(e)?e.values:[]}function za(e){return Da(e)||Aa(e)?e.values:[]}function Wa(e){return ja(e)&&Bn||Ba(e)&&kn||Ha(e)&&Tn}function Xa(e,t,n){var r=[];return function(i){var s=i.id||i,o;if(e[s]instanceof Function){o=e[s](i)}else if(e[s]){o=e[s]}else{if(r.indexOf(s)<0){r.push(s)}o=t[r.indexOf(s)%t.length];e[s]=o}return n instanceof Function?n(o,i):o}}function Va(e,t){var n=t.unit==="value",r=t.values&&t.values.length?t.values:[],i=t.max||100;return function(t){var s,o,u=e[e.length-1];for(s=0;s<r.length;s++){o=n?t:t*100/i;if(o<r[s]){u=e[s];break}}return u}}function $a(t){var n;if(t instanceof Date){n=t}else if(typeof t==="number"){n=new Date(t)}else{n=cr(O).parse(t)}if(!n||isNaN(+n)){e.console.error("Failed to parse x '"+t+"' to Date object")}return n}function Ja(e,t){var n=u.mouse(e),r=u.select(e);var i=r.attr("cx")*1,s=r.attr("cy")*1;return Math.sqrt(Math.pow(i-n[0],2)+Math.pow(s-n[1],2))<t}function Ka(e){var t=u.mouse(e),n=e.getBoundingClientRect(),r=e.pathSegList.getItem(0),i=e.pathSegList.getItem(1);var s=r.x,o=Math.min(r.y,i.y),a=n.width,f=n.height,l=2;var c=s-l,h=s+a+l,p=o+f+l,d=o-l;return c<t[0]&&t[0]<h&&d<t[1]&&t[1]<p}function Qa(e,t){var n;for(n=0;n<t.length;n++){if(t[n].start<e&&e<=t[n].end){return true}}return false}function Ga(e){return!e||typeof e==="string"&&e.length===0||typeof e==="object"&&Object.keys(e).length===0}function Ya(e){return Object.keys(e).length>0}function Za(e,t){var n=false;Object.keys(e).forEach(function(r){if(e[r]===t){n=true}});return n}function ef(e,t){var n=ls(e.id)==="y"?zr:Wr,r=bt?1:0,i=bt?0:1;return Math.pow(Ur(e.x)-t[r],2)+Math.pow(n(e.value)-t[i],2)}function tf(e,t){var n=0;e.each(function(){++n}).each("end",function(){if(!--n){t.apply(this,arguments)}})}function nf(){var e=[],t=function(t,n){var r=setInterval(function(){var t=0;e.forEach(function(e){if(e.empty()){t+=1;return}try{e.transition()}catch(n){t+=1}});if(t===e.length){clearInterval(r);if(n){n()}}},10)};t.add=function(t){e.push(t)};return t}function rf(e,t,n){return s(e[t])?e[t]:n}function sf(e){return Math.ceil(e/10)*10}function of(e,t){var n;u.select("body").selectAll(".dummy").data([e]).enter().append("text").classed(t?t:"",true).text(e).each(function(){n=this.getBoundingClientRect()}).remove();return n}function uf(e){return Ma(e)?"cardinal":Oa(e)?"step-after":"linear"}function af(){return u.selectAll([])}function ff(e,t,r){Z.call(a,t,e.node());Uf.select("."+n.selectedCircles+Du(t.id)).selectAll("."+n.selectedCircle+"-"+r).data([t]).enter().append("circle").attr("class",function(){return cu(n.selectedCircle,r)}).attr("cx",bt?ya:ga).attr("cy",bt?ga:ya).attr("stroke",function(){return fr(t)}).attr("r",wf(t)*1.4).transition().duration(100).attr("r",wf)}function lf(e,t,r){et.call(a,t,e.node());Uf.select("."+n.selectedCircles+Du(t.id)).selectAll("."+n.selectedCircle+"-"+r).transition().duration(100).attr("r",0).remove()}function cf(e,t,n,r){e?ff(t,n,r):lf(t,n,r)}function hf(e,t){Z.call(a,t,e.node());e.transition().duration(100).style("fill",function(){return u.rgb(fr(t)).brighter(.75)})}function pf(e,t){et.call(a,t,e.node());e.transition().duration(100).style("fill",function(){return fr(t)})}function df(e,t,n,r){e?hf(t,n,r):pf(t,n,r)}function vf(e,t,n,r){df(e,t,n.data,r)}function mf(e){return e.nodeName==="circle"?cf:u.select(e).classed(n.bar)?df:vf}function gf(e){return e.filter(function(e){return r(e.value)})}function yf(e){return ln&&!Oa(e)?typeof cn==="function"?cn(e):cn:0}function bf(e){return hn?pn?pn:yf(e)*1.75:yf(e)}function wf(e){return dn?dn:yf(e)*4}function Ef(e,t){return(t?Uf.selectAll("."+n.circles+Du(t)):Uf).selectAll("."+n.circle+(r(e)?"-"+e:""))}function Sf(e,t){Ef(e,t).classed(n.EXPANDED,true).attr("r",bf)}function xf(e){Ef(e).filter(function(){return u.select(this).classed(n.EXPANDED)}).classed(n.EXPANDED,false).attr("r",yf)}function Tf(e){return Uf.selectAll("."+n.bar+(r(e)?"-"+e:""))}function Nf(e){Tf(e).classed(n.EXPANDED,true)}function Cf(e){Tf(e).classed(n.EXPANDED,false)}function kf(e,t){var n=u.svg.area(),r=Df(e,t),i=t?us:os,s=function(e,t){return H.length>0?r(e,t)[0][1]:i(e.id)(0)},o=function(e,t){return H.length>0?r(e,t)[1][1]:i(e.id)(e.value)};n=bt?n.x0(s).x1(o).y(Ku):n.x(Ku).y0(s).y1(o);return function(e){var t=gf(e.values),r=0,i=0,s;if(_a(e)){s=n.interpolate(uf(e))(t)}else{if(t[0]){r=Ur(t[0].x);i=os(e.id)(t[0].value)}s=bt?"M "+i+" "+r:"M "+r+" "+i}return s?s:"M 0 0"}}function Lf(e,t){var n=u.svg.line(),r=Hf(e,t),i=t?us:os,s=t?Yu:Ku,o=function(e,t){return H.length>0?r(e,t)[0][1]:i(e.id)(e.value)};n=bt?n.x(o).y(s):n.x(s).y(o);if(!vn){n=n.defined(function(e){return e.value!=null})}return function(e){var r=vn?gf(e.values):e.values,s=t?s:Xr,o=i(e.id),u=0,a=0,f;if(Aa(e)){if(R[e.id]){f=Bf(r,s,o,R[e.id])}else{f=n.interpolate(uf(e))(r)}}else{if(r[0]){u=s(r[0].x);a=o(r[0].value)}f=bt?"M "+a+" "+u:"M "+u+" "+a}return f?f:"M 0 0"}}function Af(e,t){var n=Pf(e,t);return function(e,t){var r=n(e,t);var i=bt?1:0;var s=bt?0:1;var o="M "+r[0][i]+","+r[0][s]+" "+"L"+r[1][i]+","+r[1][s]+" "+"L"+r[2][i]+","+r[2][s]+" "+"L"+r[3][i]+","+r[3][s]+" "+"z";return o}}function Of(e,t){var n=Pf(e,false),r=t?Mf:_f;return function(e,t){return r(n(e,t),e,this)}}function Mf(e,t,n){var r=n.getBoundingClientRect(),i,s;if(bt){s=Da(t)?4:6;i=e[2][1]+s*(t.value<0?-1:1)}else{i=e[0][0]+(e[2][0]-e[0][0])/2}return i>br?br-r.width:i}function _f(e,t,n){var r=n.getBoundingClientRect(),i;if(bt){i=(e[0][0]+e[2][0]+r.height*.6)/2}else{i=e[2][1]+(t.value<0?r.height:Da(t)?-3:-6)}return i<r.height?r.height:i}function Df(e,t){var n=e.__max__+1,r=da(0,n,e,!!t),i=va(!!t),s=ma(_a,e,!!t),o=t?us:os;return function(e,t){var n=o(e.id)(0),u=s(e,t)||n,a=r(e),f=i(e);if(bt){if(0<e.value&&f<n||e.value<0&&n<f){f=n}}return[[a,u],[a,f-(n-u)]]}}function Pf(e,t){var n=e.__max__+1,r=ba(Jr,n),i=da(r,n,e,!!t),s=va(!!t),o=ma(Da,e,!!t),u=t?us:os;return function(e,t){var n=u(e.id)(0),a=o(e,t)||n,f=i(e),l=s(e);if(bt){if(0<e.value&&l<n||e.value<0&&n<l){l=n}}return[[f,a],[f,l-(n-a)],[f+r,l-(n-a)],[f+r,a]]}}function Hf(e,t){var n=e.__max__+1,r=da(0,n,e,!!t),i=va(!!t),s=ma(Aa,e,!!t),o=t?us:os;return function(e,t){var n=o(e.id)(0),u=s(e,t)||n,a=r(e),f=i(e);if(bt){if(0<e.value&&f<n||e.value<0&&n<f){f=n}}return[[a,f-(n-u)]]}}function Bf(e,t,n,r){var o=-1,u,a;var f="M",l;var c,h,p,d,v,m,g;var y,b;var w=[];if(s(r)){for(u=0;u<r.length;u++){w[u]={};if(i(r[u].start)){w[u].start=e[0].x}else{w[u].start=er?$a(r[u].start):r[u].start}if(i(r[u].end)){w[u].end=e[e.length-1].x}else{w[u].end=er?$a(r[u].end):r[u].end}}}y=bt?function(e){return n(e.value)}:function(e){return t(e.x)};b=bt?function(e){return t(e.x)}:function(e){return n(e.value)};if(er){l=function(e,r,i,s){var o=e.x.getTime(),u=r.x-e.x,a=new Date(o+u*i),f=new Date(o+u*(i+s));return"M"+t(a)+" "+n(h(i))+" "+t(f)+" "+n(h(i+s))}}else{l=function(e,r,i,s){return"M"+t(c(i),true)+" "+n(h(i))+" "+t(c(i+s),true)+" "+n(h(i+s))}}for(u=0;u<e.length;u++){if(i(w)||!Qa(e[u].x,w)){f+=" "+y(e[u])+" "+b(e[u])}else{c=rs(e[u-1].x,e[u].x,er);h=rs(e[u-1].value,e[u].value);p=t(e[u].x)-t(e[u-1].x);d=n(e[u].value)-n(e[u-1].value);v=Math.sqrt(Math.pow(p,2)+Math.pow(d,2));m=2/v;g=m*2;for(a=m;a<=1;a+=g){f+=l(e[u-1],e[u],a,m)}}o=e[u].x}return f}function If(){var e=b?Ff:function(){};Uf.select("."+n.zoomRect).call(e);Uf.selectAll("."+n.eventRect).call(e)}function Qf(){if(bt){Yr.x.call(Jr);Yr.subx.call(Gr)}else{Yr.y.call(Kr);Yr.y2.call(Qr)}Si();ts();ll();yi(false)}function Gf(t){var n=new MutationObserver(function(r){r.forEach(function(r){if(r.type==="childList"&&r.previousSibling){n.disconnect();var i=e.setInterval(function(){if(t.node().parentNode){e.clearInterval(i);Qf();ol({withTransform:true,withUpdateXDomain:true,withUpdateOrgXDomain:true,withTransition:false,withTransitionForTransform:false,withLegend:true});t.transition().style("opacity",1)}},10)}})});n.observe(t.node(),{attributes:true,childList:true,characterData:true})}function Yf(t){var r,i,s,o,f=true;Vf=u.select(h);if(Vf.empty()){Vf=u.select(document.createElement("div")).style("opacity",0);Gf(Vf);f=false}Vf.html("").classed("c3",true);a.data.xs={};a.data.targets=Ro(t);if(X){a.data.targets=a.data.targets.filter(X)}if(W){nu(W===true?Jo(a.data.targets):W)}if(Ca(a.data.targets)){ft=false}Si();ts();Ur.domain(u.extent(co(a.data.targets)));zr.domain(uo(a.data.targets,"y"));Wr.domain(uo(a.data.targets,"y2"));Xr.domain(Ur.domain());Vr.domain(zr.domain());$r.domain(Wr.domain());$f=Ur.domain();jf.scale(Xr);if(b){Ff.scale(Ur)}qf=Vf.append("svg").style("overflow","hidden").on("mouseenter",function(){return x.call(a)}).on("mouseleave",function(){return T.call(a)});Rf=qf.append("defs");Rf.append("clipPath").attr("id",Jn).append("rect");Rf.append("clipPath").attr("id",Kn).append("rect");Rf.append("clipPath").attr("id",Qn).append("rect");ll();Uf=qf.append("g").attr("transform",ri.main);zf=qf.append("g").attr("transform",ri.context);Wf=qf.append("g").attr("transform",ri.legend);if(!it){zf.style("visibility","hidden")}if(!ft){Wf.style("visibility","hidden");vr=Jo(a.data.targets)}Xf=Vf.style("position","relative").append("div").style("position","absolute").style("pointer-events","none").style("z-index","10").style("display","none");xl(Jo(a.data.targets),{withTransform:false,withTransitionForTransform:false,withTransition:false});Uf.append("text").attr("class",n.text+" "+n.empty).attr("text-anchor","middle").attr("dominant-baseline","middle");Uf.append("g").attr("clip-path",Gn).attr("class",n.regions);s=Uf.append("g").attr("clip-path",Gn).attr("class",n.grid);if(nn){s.append("g").attr("class",n.xgrids)}if(fn){s.append("g").attr("class",n.xgridFocus).append("line").attr("class",n.xgridFocus)}s.append("g").attr("class",n.xgridLines);if(on){s.append("g").attr("class",n.ygrids)}s.append("g").attr("class",n.ygridLines);Uf.append("g").attr("clip-path",Gn).attr("class",n.chart);i=Uf.select("."+n.chart).append("g").attr("class",n.eventRects).style("fill-opacity",0);Uf.select("."+n.chart).append("g").attr("class",n.chartBars);Uf.select("."+n.chart).append("g").attr("class",n.chartLines);r=Uf.select("."+n.chart).append("g").attr("class",n.chartArcs).attr("transform",ri.arc);r.append("text").attr("class",n.chartArcsTitle).style("text-anchor","middle").text(ro());if(Ca(a.data.targets)){r.append("path").attr("class",n.chartArcsBackground).attr("d",function(){var e={data:[{value:An}],startAngle:-1*(Math.PI/2),endAngle:Math.PI/2};return $s(e,true,true)});r.append("text").attr("dy",".75em").attr("class",n.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none").text(Nn?On:"");r.append("text").attr("dx",-1*(kr+(Nr-kr)/2)+"px").attr("dy","1.2em").attr("class",n.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none").text(Nn?Ln:"");r.append("text").attr("dx",kr+(Nr-kr)/2+"px").attr("dy","1.2em").attr("class",n.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none").text(Nn?An:"")}Uf.select("."+n.chart).append("g").attr("class",n.chartTexts);Uf.insert("rect",E?null:"g."+n.regions).attr("class",n.zoomRect).attr("width",br).attr("height",Er).style("opacity",0).style("cursor",bt?"ns-resize":"ew-resize").on("dblclick.zoom",null);if(Bt){jf.extent(typeof Bt!=="function"?Bt:Bt(co()))}Yr.x=Uf.append("g").attr("class",n.axis+" "+n.axisX).attr("clip-path",Yn).attr("transform",ri.x).style("visibility",wt?"visible":"hidden");Yr.x.append("text").attr("class",n.axisXLabel).attr("transform",bt?"rotate(-90)":"").style("text-anchor",Fs);Yr.y=Uf.append("g").attr("class",n.axis+" "+n.axisY).attr("clip-path",Zn).attr("transform",ri.y).style("visibility",Ft?"visible":"hidden");Yr.y.append("text").attr("class",n.axisYLabel).attr("transform",bt?"":"rotate(-90)").style("text-anchor",Is);Yr.y2=Uf.append("g").attr("class",n.axis+" "+n.axisY2).attr("transform",ri.y2).style("visibility",$t?"visible":"hidden");Yr.y2.append("text").attr("class",n.axisY2Label).attr("transform",bt?"":"rotate(-90)").style("text-anchor",qs);zf.append("g").attr("clip-path",Gn).attr("class",n.chart);zf.select("."+n.chart).append("g").attr("class",n.chartBars);zf.select("."+n.chart).append("g").attr("class",n.chartLines);zf.append("g").attr("clip-path",Gn).attr("class",n.brush).call(jf).selectAll("rect").attr(bt?"width":"height",bt?wr:Sr);Yr.subx=zf.append("g").attr("class",n.axisX).attr("transform",ri.subx).attr("clip-path",bt?"":Yn);pl(a.data.targets);if(f){Qf();ol({withTransform:true,withUpdateXDomain:true,withUpdateOrgXDomain:true,withTransitionForAxis:false})}if(Xn){if(er&&typeof Vn==="string"){Vn=$a(Vn);for(o=0;o<a.data.targets[0].values.length;o++){if(a.data.targets[0].values[o].x-Vn===0){break}}Vn=o}Xf.html(Wn(a.data.targets.map(function(e){return _o(e.values[Vn])}),cs(),zu(La(a.data.targets)),fr));Xf.style("top",$n.top).style("left",$n.left).style("display","block")}if(e.onresize==null){e.onresize=fl()}if(e.onresize.add){e.onresize.add(function(){N.call(a)});e.onresize.add(function(){a.flush()});e.onresize.add(function(){C.call(a)})}a.element=Vf.node()}function Zf(e){e.append("rect").attr("class",ku).style("cursor",V&&$?"pointer":null).on("mouseover",function(e){var t=e.index,r,i;if(ir){return}if(La(a.data.targets)){return}r=a.data.targets.map(function(e){return _o(Do(e.values,t))});i=[];Object.keys(D).forEach(function(e){for(var t=0;t<r.length;t++){if(r[t]&&r[t].id===e){i.push(r[t]);r.shift(t);break}}});r=i.concat(r);if(hn){Sf(t)}Nf(t);Uf.selectAll("."+n.shape+"-"+t).each(function(e){G.call(a,e)})}).on("mouseout",function(e){var t=e.index;if(La(a.data.targets)){return}ca();fa();xf(t);Cf();Uf.selectAll("."+n.shape+"-"+t).each(function(e){Y.call(a,e)})}).on("mousemove",function(e){var t,r=e.index,i=qf.select("."+n.eventRect+"-"+r);if(ir){return}if(La(a.data.targets)){return}t=Zo(a.data.targets).map(function(e){return _o(Do(e.values,r))});if(qn){aa(t,u.mouse(this));la(t)}if(qn&&(!V||$)){return}Uf.selectAll("."+n.shape+"-"+r).each(function(){u.select(this).classed(n.EXPANDED,true);if(V){i.style("cursor",$?"pointer":null)}if(!qn){ca();fa();if(!$){xf(r);Cf()}}}).filter(function(e){if(this.nodeName==="circle"){return Ja(this,wf(e))}else if(this.nodeName==="path"){return Ka(this)}}).each(function(e){if(V&&($||J(e))){i.style("cursor","pointer")}if(!qn){aa([e],u.mouse(this));la([e]);if(hn){Sf(r,e.id)}Nf(r,e.id)}})}).on("click",function(e){var t=e.index;if(La(a.data.targets)){return}if(sr){sr=false;return}Uf.selectAll("."+n.shape+"-"+t).each(function(e){tl(this,e,t)})}).call(u.behavior.drag().origin(Object).on("drag",function(){nl(u.mouse(this))}).on("dragstart",function(){rl(u.mouse(this))}).on("dragend",function(){il()})).on("dblclick.zoom",null)}function el(e){e.append("rect").attr("x",0).attr("y",0).attr("width",br).attr("height",Er).attr("class",n.eventRect).on("mouseout",function(){if(La(a.data.targets)){return}ca();fa();xf()}).on("mousemove",function(){var e=Zo(a.data.targets);var t,r,i,s;if(ir){return}if(La(e)){return}t=u.mouse(this);r=ta(e,t);if(!r){return}if(Pa(r)){i=[r]}else{i=ra(e,r.x)}s=i.map(function(e){return _o(e)});aa(s,t);if(hn){xf();Sf(r.index,r.id)}la(s);if(ef(r,t)<100){qf.select("."+n.eventRect).style("cursor","pointer");if(!or){G.call(a,r);or=true}}else{qf.select("."+n.eventRect).style("cursor",null);Y.call(a,r);or=false}}).on("click",function(){var e=Zo(a.data.targets);var t,r;if(La(e)){return}t=u.mouse(this);r=ta(e,t);if(!r){return}if(ef(r,t)<100){Uf.select("."+n.circles+"-"+Du(r.id)).select("."+n.circle+"-"+r.index).each(function(){tl(this,r,r.index)})}}).call(u.behavior.drag().origin(Object).on("drag",function(){nl(u.mouse(this))}).on("dragstart",function(){rl(u.mouse(this))}).on("dragend",function(){il()})).on("dblclick.zoom",null)}function tl(e,t,r){var i=u.select(e),s=i.classed(n.SELECTED),o,f;if(e.nodeName==="circle"){o=Ja(e,wf(t)*1.5);f=cf}else if(e.nodeName==="path"){if(i.classed(n.bar)){o=Ka(e);f=df}else{o=true;f=vf}}if($||o){if(V&&J(t)){if(!K){Uf.selectAll("."+n.shapes+($?Du(t.id):"")).selectAll("."+n.shape).each(function(e,t){var r=u.select(this);if(r.classed(n.SELECTED)){f(false,r.classed(n.SELECTED,false),e,t)}})}i.classed(n.SELECTED,!s);f(!s,i,t,r)}Q.call(a,t,e)}}function nl(e){var t,r,i,s,o,f,l,c;if(La(a.data.targets)){return}if(!V){return}if(b&&!Ff.altDomain){return}if(!K){return}t=rr[0];r=rr[1];i=e[0];s=e[1];o=Math.min(t,i);f=Math.max(t,i);l=$?mr.top:Math.min(r,s);c=$?Er:Math.max(r,s);Uf.select("."+n.dragarea).attr("x",o).attr("y",l).attr("width",f-o).attr("height",c-l);Uf.selectAll("."+n.shapes).selectAll("."+n.shape).filter(function(e){return J(e)}).each(function(e,t){var r=u.select(this),i=r.classed(n.SELECTED),s=r.classed(n.INCLUDED),a,h,p,d,v,m=false,g;if(r.classed(n.circle)){a=r.attr("cx")*1;h=r.attr("cy")*1;v=cf;m=o<a&&a<f&&l<h&&h<c}else if(r.classed(n.bar)){g=ia(this);a=g.x;h=g.y;p=g.width;d=g.height;v=df;m=!(f<a||a+p<o)&&!(c<h||h+d<l)}else{return}if(m^s){r.classed(n.INCLUDED,!s);r.classed(n.SELECTED,!i);v(!i,r,e,t)}})}function rl(e){if(La(a.data.targets)){return}if(!V){return}rr=e;Uf.select("."+n.chart).append("rect").attr("class",n.dragarea).style("opacity",.1);ir=true;tt.call(a)}function il(){if(La(a.data.targets)){return}if(!V){return}Uf.select("."+n.dragarea).transition().duration(100).style("opacity",0).remove();Uf.selectAll("."+n.shape).classed(n.INCLUDED,false);ir=false;nt.call(a)}function sl(e,t){if(t==="grid"){e.each(function(){var e=u.select(this),t=e.attr("x1"),n=e.attr("x2"),r=e.attr("y1"),i=e.attr("y2");e.attr({x1:Math.ceil(t),x2:Math.ceil(n),y1:Math.ceil(r),y2:Math.ceil(i)})})}}function ol(e,t){var i,s,o,f,l,c,h,p,d;var v,m,g,y,w,E,x,T,N,C,L,O;var M=pa(_a),_=pa(Da),D=pa(Aa),P,H;var B,j;var F,I,q,R,U,z,W,X,V;var $=La(a.data.targets);var K,Q,Z,et,tt,nt,st,ot;var at,lt,ct,ht;var pt=Zo(a.data.targets),dt,vt,mt;i=f=g=x=af();e=e||{};F=rf(e,"withY",true);I=rf(e,"withSubchart",true);q=rf(e,"withTransition",true);z=rf(e,"withTransform",false);W=rf(e,"withUpdateXDomain",false);X=rf(e,"withUpdateOrgXDomain",false);V=rf(e,"withLegend",false);R=rf(e,"withTransitionForExit",q);U=rf(e,"withTransitionForAxis",q);at=q?k:0;lt=R?at:0;ct=U?at:0;t=t||cl(ct);if(V&&ft){xl(Jo(a.data.targets),e,t)}if(tr&&pt.length===0){Ur.domain([0,Yr.x.selectAll(".tick").size()])}if(pt.length){ho(pt,W,X);if(!Ot&&(At||Lt)){dt=tu(eu(pt),Lt);Jr.tickValues(dt);Gr.tickValues(dt)}}else{Jr.tickValues([]);Gr.tickValues([])}zr.domain(uo(pt,"y"));Wr.domain(uo(pt,"y2"));Yr.x.style("opacity",$?0:1);Yr.y.style("opacity",$?0:1);Yr.y2.style("opacity",$?0:1);Yr.subx.style("opacity",$?0:1);t.axisX.call(Jr);t.axisY.call(Kr);t.axisY2.call(Qr);t.axisSubX.call(Gr);Us(q);if(W&&pt.length){if(Ct&&dt){for(vt=1;vt<dt.length;vt++){if(dt.length/vt<kt){mt=vt;break}}qf.selectAll("."+n.axisX+" .tick text").each(function(e){var t=dt.indexOf(e);if(t>=0){u.select(this).style("display",t%mt?"none":"block")}})}else{qf.selectAll("."+n.axisX+" .tick text").style("display","block")}}if(!bt&&Mt){gs(Yr.x,t.axisX,Mt)}K=kf(M,false);Z=Af(_);tt=Lf(D,false);st=Of(_,true);ot=Of(_,false);Vr.domain(zr.domain());$r.domain(Wr.domain());Xf.style("display","none");xi();Uf.select("text."+n.text+"."+n.empty).attr("x",br/2).attr("y",Er/2).text(rt).transition().style("opacity",pt.length?0:1);Uf.select("line."+n.xgridFocus).style("visibility","hidden");if(nn){s=bt?{x1:0,x2:br,y1:function(e){return Ur(e)-H},y2:function(e){return Ur(e)-H}}:{x1:function(e){return Ur(e)+H},x2:function(e){return Ur(e)+H},y1:0,y2:Er};d=function(e){o=ha(rn,Ur);H=tr?Jr.tickOffset():0;i=Uf.select("."+n.xgrids).selectAll("."+n.xgrid).data(o);i.enter().append("line").attr("class",n.xgrid);if(!e){i.attr(s).style("opacity",function(){return+u.select(this).attr(bt?"y1":"x1")===(bt?Er:0)?0:1})}i.exit().remove()};d()}f=Uf.select("."+n.xgridLines).selectAll("."+n.xgridLine).data(sn);l=f.enter().append("g").attr("class",function(e){return n.xgridLine+(e.class?" "+e.class:"")});l.append("line").style("opacity",0);l.append("text").attr("text-anchor","end").attr("transform",bt?"":"rotate(-90)").attr("dx",bt?0:-mr.top).attr("dy",-5).style("opacity",0);f.exit().transition().duration(at).style("opacity",0).remove();if(F&&on){c=Uf.select("."+n.ygrids).selectAll("."+n.ygrid).data(zr.ticks(an));c.enter().append("line").attr("class",n.ygrid);c.attr("x1",bt?zr:0).attr("x2",bt?zr:br).attr("y1",bt?0:zr).attr("y2",bt?Er:zr);c.exit().remove();sl(c,"grid")}if(F){h=Uf.select("."+n.ygridLines).selectAll("."+n.ygridLine).data(un);p=h.enter().append("g").attr("class",function(e){return n.ygridLine+(e.class?" "+e.class:"")});p.append("line").style("opacity",0);p.append("text").attr("text-anchor","end").attr("transform",bt?"rotate(-90)":"").attr("dx",bt?0:-mr.top).attr("dy",-5).style("opacity",0);h.select("line").transition().duration(at).attr("x1",bt?Gu:0).attr("x2",bt?Gu:br).attr("y1",bt?0:Gu).attr("y2",bt?Er:Gu).style("opacity",1);h.select("text").transition().duration(at).attr("x",bt?0:br).attr("y",Gu).text(function(e){return e.text}).style("opacity",1);h.exit().transition().duration(at).style("opacity",0).remove()}E=Uf.select("."+n.regions).selectAll("."+n.region).data(Fn);E.enter().append("g").attr("class",Cu).append("rect").style("fill-opacity",0);E.exit().transition().duration(at).style("opacity",0).remove();y=Uf.selectAll("."+n.bars).selectAll("."+n.bar).data(Ra);y.enter().append("path").attr("class",wu).style("stroke",function(e){return fr(e.id)}).style("fill",function(e){return fr(e.id)}).style("fill-opacity",function(){if(ut){return ut}return Fu});y.style("opacity",Fu);y.exit().transition().duration(lt).style("opacity",0).remove();v=Uf.selectAll("."+n.lines).selectAll("."+n.line).data(Ia);v.enter().append("path").attr("class",mu).style("stroke",fr);v.style("opacity",Fu).attr("transform",null);v.exit().transition().duration(lt).style("opacity",0).remove();m=Uf.selectAll("."+n.areas).selectAll("."+n.area).data(Ia);m.enter().append("path").attr("class",Tu).style("fill",fr).style("opacity",function(){Jf=+u.select(this).style("opacity");return 0});m.style("opacity",Jf);m.exit().transition().duration(lt).style("opacity",0).remove();if(ln){g=Uf.selectAll("."+n.circles).selectAll("."+n.circle).data(Ua);g.enter().append("circle").attr("class",yu).attr("r",yf).style("fill",fr);g.style("opacity",Fu);g.exit().remove()}if(Ru()){x=Uf.selectAll("."+n.texts).selectAll("."+n.text).data(za);x.enter().append("text").attr("class",hu).attr("text-anchor",function(e){return bt?e.value<0?"end":"start":"middle"}).style("stroke","none").style("fill",fr).style("fill-opacity",0);x.text(function(e){return Ju(ls(e.id))(e.value,e.id)});x.exit().transition().duration(lt).style("fill-opacity",0).remove()}w=Uf.selectAll("."+n.arcs).selectAll("."+n.arc).data(qa);w.enter().append("path").attr("class",Su).style("fill",function(e){return fr(e.data)}).style("cursor",function(e){return J(e)?"pointer":null}).style("opacity",0).each(function(e){if(Ba(e.data)){e.startAngle=e.endAngle=-1*(Math.PI/2)}this._current=e}).on("mouseover",function(e){var t,n;if(ur){return}t=Ws(e);n=Qs(t);Ys(t.data.id);bl(t.data.id,true);G.call(a,n,this)}).on("mousemove",function(e){var t=Ws(e),n=Qs(t),r=[n];aa(r,u.mouse(this))}).on("mouseout",function(e){var t,n;if(ur){return}t=Ws(e);n=Qs(t);Zs(t.data.id);wl();fa();Y.call(a,n,this)}).on("click",function(e,t){var n=Ws(e),r=Qs(n);tl(this,r,t)});w.attr("transform",function(e){return!Ba(e.data)&&z?"scale(0)":""}).style("opacity",function(e){return e===this._current?0:1}).each(function(){ur=true}).transition().duration(at).attrTween("d",function(e){var t=Ws(e),n;if(!t){return function(){return"M 0 0"}}if(isNaN(this._current.endAngle)){this._current.endAngle=this._current.startAngle}n=u.interpolate(this._current,t);this._current=n(0);return function(e){return $s(n(e),true)}}).attr("transform",z?"scale(1)":"").style("fill",function(e){return lr?lr(e.data.values[0].value):fr(e.data.id)}).style("opacity",ut).call(tf,function(){ur=false});w.exit().transition().duration(lt).style("opacity",0).remove();Uf.selectAll("."+n.chartArc).select("text").style("opacity",0).attr("class",function(e){return Ba(e.data)?n.gaugeValue:""}).text(Gs).attr("transform",Js).transition().duration(at).style("opacity",function(e){return Go(e.data.id)&&Fa(e.data)?1:0});Uf.select("."+n.chartArcsTitle).style("opacity",ka(a.data.targets)||Ca(a.data.targets)?1:0);if(it){if(u.event&&u.event.type==="zoom"){jf.extent(Ur.orgDomain()).update()}if(I){if(!bt&&Mt){gs(Yr.subx,t.axisSubX,Mt)}if(!jf.empty()){jf.extent(Ur.orgDomain()).update()}Q=kf(M,true);et=Af(_,true);nt=Lf(D,true);C=zf.selectAll("."+n.bars).selectAll("."+n.bar).data(Ra);C.enter().append("path").attr("class",wu).style("stroke","none").style("fill",fr);C.style("opacity",Fu).transition().duration(at).attr("d",et).style("opacity",1);C.exit().transition().duration(at).style("opacity",0).remove();T=zf.selectAll("."+n.lines).selectAll("."+n.line).data(Ia);T.enter().append("path").attr("class",mu).style("stroke",fr);T.style("opacity",Fu).transition().duration(at).attr("d",nt).style("opacity",1);T.exit().transition().duration(at).style("opacity",0).remove();N=zf.selectAll("."+n.areas).selectAll("."+n.area).data(Ia);N.enter().append("path").attr("class",Tu).style("fill",fr).style("opacity",function(){Jf=+u.select(this).style("opacity");return 0});N.style("opacity",0).transition().duration(at).attr("d",Q).style("fill",fr).style("opacity",Jf);N.exit().transition().duration(lt).style("opacity",0).remove()}}Uf.selectAll("."+n.selectedCircles).filter(function(e){return Da(e)}).selectAll("circle").remove();if(S){L=Uf.select("."+n.eventRects).style("cursor",b?bt?"ns-resize":"ew-resize":null);if(Ya(A)&&!Mo(A)){if(!L.classed(n.eventRectsMultiple)){L.classed(n.eventRectsMultiple,true).classed(n.eventRectsSingle,false).selectAll("."+n.eventRect).remove()}O=Uf.select("."+n.eventRects).selectAll("."+n.eventRect).data([0]);el(O.enter());O.attr("x",0).attr("y",0).attr("width",br).attr("height",Er)}else{if(!L.classed(n.eventRectsSingle)){L.classed(n.eventRectsMultiple,false).classed(n.eventRectsSingle,true).selectAll("."+n.eventRect).remove()}if((nr()||er)&&!tr){j=function(e){var t=zo(e.index),n=Wo(e.index),r=a.data.xs[e.id][e.index],i=(Ur(n?n:r)-Ur(t?t:r))/2;return i<0?0:i};B=function(e){var t=zo(e.index),n=a.data.xs[e.id][e.index];return(Ur(n)+Ur(t?t:n))/2}}else{j=Ki();B=function(e){return Ur(e.x)-j/2}}P=Vo(a.data.targets);Uf.select("."+n.eventRects).datum(P?P.values:[]);O=Uf.select("."+n.eventRects).selectAll("."+n.eventRect).data(function(e){return e});Zf(O.enter());O.attr("class",ku).attr("x",bt?0:B).attr("y",bt?B:0).attr("width",bt?br:j).attr("height",bt?j:Er);O.exit().remove()}}u.transition().duration(at).each(function(){var t=[];t.push(y.transition().attr("d",Z).style("fill",fr).style("opacity",1));t.push(v.transition().attr("d",tt).style("stroke",fr).style("opacity",1));t.push(m.transition().attr("d",K).style("fill",fr).style("opacity",Jf));t.push(g.transition().style("opacity",Iu).style("fill",fr).attr("cx",bt?ya:ga).attr("cy",bt?ga:ya));t.push(Uf.selectAll("."+n.selectedCircle).transition().attr("cx",bt?ya:ga).attr("cy",bt?ga:ya));t.push(x.transition().attr("x",st).attr("y",ot).style("fill",fr).style("fill-opacity",e.flow?0:qu));t.push(E.selectAll("rect").transition().attr("x",yo).attr("y",bo).attr("width",wo).attr("height",Eo).style("fill-opacity",function(e){return r(e.opacity)?e.opacity:.1}));t.push(f.select("line").transition().attr("x1",bt?0:Qu).attr("x2",bt?br:Qu).attr("y1",bt?Qu:mr.top).attr("y2",bt?Qu:Er).style("opacity",1));t.push(f.select("text").transition().attr("x",bt?br:0).attr("y",Qu).text(function(e){return e.text}).style("opacity",1));if(e.flow){ht=nf();t.forEach(function(e){ht.add(e)})}}).call(ht?ht:function(){},function(){var t,r=1,o,l=e.flow.index,c=e.flow.length,h=Do(a.data.targets[0].values,l),p=Do(a.data.targets[0].values,l+c),b=Ur.domain(),w,S=e.flow.duration||at,T=e.flow.done||function(){},N=nf();a.data.targets.forEach(function(e){e.values.splice(0,c)});w=ho(pt,true,true);if(d){d(true)}if(!e.flow.orgDataCount){if(a.data.targets[0].values.length!==1){t=Ur(b[0])-Ur(w[0])}else{if(er){h=Do(a.data.targets[0].values,0);p=Do(a.data.targets[0].values,a.data.targets[0].values.length-1);t=Ur(h.x)-Ur(p.x)}else{t=po(w)/2}}}else if(e.flow.orgDataCount===1||h.x===p.x){t=Ur(b[0])-Ur(w[0])}else{if(er){t=Ur(b[0])-Ur(w[0])}else{t=Ur(h.x)-Ur(p.x)}}r=po(b)/po(w);o="translate("+t+",0) scale("+r+",1)";u.transition().ease("linear").duration(S).each(function(){N.add(Yr.x.transition().call(Jr));N.add(y.transition().attr("transform",o));N.add(v.transition().attr("transform",o));N.add(m.transition().attr("transform",o));N.add(g.transition().attr("transform",o));N.add(x.transition().attr("transform",o));N.add(E.filter(So).transition().attr("transform",o));N.add(i.transition().attr("transform",o));N.add(f.transition().attr("transform",o))}).call(N,function(){var e,t=[],r=[],o=[];if(c){for(e=0;e<c;e++){t.push("."+n.shape+"-"+(l+e));r.push("."+n.text+"-"+(l+e));o.push("."+n.eventRect+"-"+(l+e))}qf.selectAll("."+n.shapes).selectAll(t).remove();qf.selectAll("."+n.texts).selectAll(r).remove();qf.selectAll("."+n.eventRects).selectAll(o).remove();qf.select("."+n.xgrid).remove()}i.attr("transform",null).attr(s);f.attr("transform",null);f.select("line").attr("x1",bt?0:Qu).attr("x2",bt?br:Qu);f.select("text").attr("x",bt?br:0).attr("y",Qu);y.attr("transform",null).attr("d",Z);v.attr("transform",null).attr("d",tt);m.attr("transform",null).attr("d",K);g.attr("transform",null).attr("cx",bt?ya:ga).attr("cy",bt?ga:ya);x.attr("transform",null).attr("x",st).attr("y",ot).style("fill-opacity",qu);E.attr("transform",null);E.select("rect").filter(So).attr("x",yo).attr("width",wo);O.attr("x",bt?0:B).attr("y",bt?B:0).attr("width",bt?br:j).attr("height",bt?j:Er);T()})});Jo(a.data.targets).forEach(function(e){Kf[e]=true});If()}function ul(){ol({withTransition:false,withY:false,withSubchart:false,withUpdateXDomain:true})}function al(){if(!b){return}if(Zo(a.data.targets).length===0){return}if(u.event.sourceEvent.type==="mousemove"&&Ff.altDomain){Ur.domain(Ff.altDomain);Ff.scale(Ur).updateScaleExtent();return}if(tr&&Ur.orgDomain()[0]===$f[0]){Ur.domain([$f[0]-1e-10,Ur.orgDomain()[1]])}ol({withTransition:false,withY:false,withSubchart:false});if(u.event.sourceEvent.type==="mousemove"){sr=true}}function fl(){function t(){e.forEach(function(e){e()})}var e=[];t.add=function(t){e.push(t)};return t}function ll(){qf.attr("width",xr).attr("height",Tr);qf.select("#"+Jn).select("rect").attr("width",br).attr("height",Er);qf.select("#"+Kn).select("rect").attr("x",Ii).attr("y",qi).attr("width",Xi).attr("height",Vi);qf.select("#"+Qn).select("rect").attr("x",Ri).attr("y",Ui).attr("width",$i).attr("height",Ji);qf.select("."+n.zoomRect).attr("width",br).attr("height",Er);Vf.style("max-height",Tr+"px")}function cl(e){return{axisX:e?Yr.x.transition().duration(e):Yr.x,axisY:e?Yr.y.transition().duration(e):Yr.y,axisY2:e?Yr.y2.transition().duration(e):Yr.y2,axisSubX:e?Yr.subx.transition().duration(e):Yr.subx}}function hl(e){var t;e=e||{};e.withTransition=rf(e,"withTransition",true);e.withTransform=rf(e,"withTransform",false);e.withLegend=rf(e,"withLegend",false);e.withUpdateXDomain=true;e.withUpdateOrgXDomain=true;e.withTransitionForExit=false;e.withTransitionForTransform=rf(e,"withTransitionForTransform",e.withTransition);Si();if(!(e.withLegend&&ft)){t=cl(e.withTransitionForAxis?k:0);ts();ll();yi(e.withTransitionForTransform,t)}ol(e,t)}function pl(e){var t,r,i,s,o,u,f,l;var c,h,p,d;f=Uf.select("."+n.chartTexts).selectAll("."+n.chartText).data(e).attr("class",Au);l=f.enter().append("g").attr("class",Au).style("opacity",0).style("pointer-events","none");l.append("g").attr("class",pu);s=Uf.select("."+n.chartBars).selectAll("."+n.chartBar).data(e).attr("class",Mu);i=s.enter().append("g").attr("class",Mu).style("opacity",0).style("pointer-events","none");i.append("g").attr("class",Eu).style("cursor",function(e){return J(e)?"pointer":null});r=Uf.select("."+n.chartLines).selectAll("."+n.chartLine).data(e).attr("class",Ou);t=r.enter().append("g").attr("class",Ou).style("opacity",0).style("pointer-events","none");t.append("g").attr("class",gu);t.append("g").attr("class",Nu);t.append("g").attr("class",function(e){return cu(n.selectedCircles,e.id)});t.append("g").attr("class",bu).style("cursor",function(e){return J(e)?"pointer":null});e.forEach(function(e){Uf.selectAll("."+n.selectedCircles+Du(e.id)).selectAll("."+n.selectedCircle).each(function(t){t.value=e.values[t.index].value})});u=Uf.select("."+n.chartArcs).selectAll("."+n.chartArc).data(Dr(e)).attr("class",_u);o=u.enter().append("g").attr("class",_u);o.append("g").attr("class",xu);o.append("text").attr("dy",Ca(a.data.targets)?"-0.35em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none");if(it){d=zf.select("."+n.chartBars).selectAll("."+n.chartBar).data(e).attr("class",Mu);p=d.enter().append("g").style("opacity",0).attr("class",Mu);p.append("g").attr("class",Eu);h=zf.select("."+n.chartLines).selectAll("."+n.chartLine).data(e).attr("class",Ou);c=h.enter().append("g").style("opacity",0).attr("class",Ou);c.append("g").attr("class",gu);c.append("g").attr("class",Nu)}qf.selectAll("."+n.target).filter(function(e){return Go(e.id)}).transition().duration(k).style("opacity",1)}function dl(e,t){if(e){if(t.filter){e=e.filter(t.filter)}if(t.type||t.types){e.forEach(function(e){t.types?wa(e.id,t.types[e.id]):wa(e.id,t.type)})}a.data.targets.forEach(function(t){for(var n=0;n<e.length;n++){if(t.id===e[n].id){t.values=e[n].values;e.splice(n,1);break}}});a.data.targets=a.data.targets.concat(e)}pl(a.data.targets);ol({withUpdateOrgXDomain:true,withUpdateXDomain:true,withLegend:true});if(typeof t.done==="function"){t.done()}}function vl(e){if(e.data){dl(Ro(e.data),e)}else if(e.url){u.csv(e.url,function(t,n){dl(Ro(n),e)})}else if(e.json){dl(Ro(Fo(e.json,e.keys)),e)}else if(e.rows){dl(Ro(Io(e.rows)),e)}else if(e.columns){dl(Ro(qo(e.columns)),e)}else{dl(null,e)}}function ml(e,t){if(typeof t!=="function"){t=function(){}}e=e.filter(function(e){return Qo(a.data.targets,e)});if(!e||e.length===0){t();return}qf.selectAll(e.map(function(e){return Pu(e)})).transition().style("opacity",0).remove().call(tf,t);e.forEach(function(e){Kf[e]=false;Wf.selectAll("."+n.legendItem+Du(e)).remove();a.data.targets=a.data.targets.filter(function(t){return t.id!==e})})}function gl(e){return e.classed(n.legendItemHidden)?ci:1}function yl(e){return e.classed(n.legendItemHidden)?ci:.3}function bl(e,t){Wf.selectAll("."+n.legendItem).transition().duration(100).style("opacity",function(n){var r=u.select(this);if(e&&n!==e){return t?yl(r):gl(r)}else{return t?gl(r):yl(r)}})}function wl(){Wf.selectAll("."+n.legendItem).transition().duration(100).style("opacity",function(){return gl(u.select(this))})}function El(e){if(!ft){ft=true;Wf.style("visibility","visible")}su(e);Wf.selectAll(ju(e)).style("visibility","visible").transition().style("opacity",function(){return gl(u.select(this))})}function Sl(e){if(ft&&Ga(e)){ft=false;Wf.style("visibility","hidden")}iu(e);Wf.selectAll(ju(e)).style("opacity",0).style("visibility","hidden")}function xl(e,t,r){function _(t,r,i){function h(e,t){if(!t){l=(f-b-a)/2;if(l<g){l=(f-a)/2;b=0;N++}}T[e]=N;x[N]=si?10:l;w[e]=b;b+=a}var s=of(t.textContent,n.legendItem),o=Math.ceil((s.width+d)/10)*10,u=Math.ceil((s.height+p)/10)*10,a=ii||si?u:o,f=ii||si?es():Zi(),l,c;if(i){b=0;N=0;v=0;m=0}if(ft&&!Yo(r)){E[r]=S[r]=T[r]=w[r]=0;return}E[r]=o;S[r]=u;if(!v||o>=v){v=o}if(!m||u>=m){m=u}c=ii||si?m:v;if(yt){Object.keys(E).forEach(function(e){E[e]=v});Object.keys(S).forEach(function(e){S[e]=m});l=(f-c*e.length)/2;if(l<g){b=0;N=0;e.forEach(function(e){h(e)})}else{h(r,true)}}else{h(r)}}var i,o,f,l,c,h;var p=4,d=36,v=0,m=0,g=10;var y,b=0,w={},E={},S={},x=[0],T={},N=0;var C,k;var L=Wf.selectAll("."+n.legendItemFocused).size();var A,O,M;t=t||{};C=rf(t,"withTransition",true);k=rf(t,"withTransitionForTransform",true);if(ii){i=function(e){return v*T[e]};l=function(e){return x[T[e]]+w[e]}}else if(si){i=function(e){return v*T[e]+10};l=function(e){return x[T[e]]+w[e]}}else{i=function(e){return x[T[e]]+w[e]};l=function(e){return m*T[e]}}o=function(e,t){return i(e,t)+14};c=function(e,t){return l(e,t)+9};f=function(e,t){return i(e,t)-4};h=function(e,t){return l(e,t)-7};y=Wf.selectAll("."+n.legendItem).data(e).enter().append("g").attr("class",function(e){return cu(n.legendItem,e)}).style("visibility",function(e){return Yo(e)?"visible":"hidden"}).style("cursor","pointer").on("click",function(e){typeof vt==="function"?vt.call(a,e):a.toggle(e)}).on("mouseover",function(e){u.select(this).classed(n.legendItemFocused,true);if(!ur){a.focus(e)}if(typeof mt==="function"){mt.call(a,e)}}).on("mouseout",function(e){u.select(this).classed(n.legendItemFocused,false);if(!ur){a.revert()}if(typeof gt==="function"){gt.call(a,e)}});y.append("text").text(function(e){return s(D[e])?D[e]:e}).each(function(e,t){_(this,e,t===0)}).style("pointer-events","none").attr("x",ii||si?o:-200).attr("y",ii||si?-200:c);y.append("rect").attr("class",n.legendItemEvent).style("fill-opacity",0).attr("x",ii||si?f:-200).attr("y",ii||si?-200:h);y.append("rect").attr("class",n.legendItemTile).style("pointer-events","none").style("fill",fr).attr("x",ii||si?o:-200).attr("y",ii||si?-200:l).attr("width",10).attr("height",10);if(si&&v!==0){Wf.insert("g","."+n.legendItem).attr("class",n.legendBackground).append("rect").attr("height",es()-10).attr("width",v*(N+1)+10)}A=Wf.selectAll("text").data(e).text(function(e){return s(D[e])?D[e]:e}).each(function(e,t){_(this,e,t===0)});(C?A.transition():A).attr("x",o).attr("y",c);O=Wf.selectAll("rect."+n.legendItemEvent).data(e);(C?O.transition():O).attr("width",function(e){return E[e]}).attr("height",function(e){return S[e]}).attr("x",f).attr("y",h);M=Wf.selectAll("rect."+n.legendItemTile).data(e);(C?M.transition():M).style("fill",fr).attr("x",i).attr("y",l);Wf.selectAll("."+n.legendItem).classed(n.legendItemHidden,function(e){return!Go(e)}).transition().style("opacity",function(e){var t=u.select(this);if(Go(e)){return!L||t.classed(n.legendItemFocused)?gl(t):yl(t)}else{return ci}});Gi(v);Yi(m);Qi(N);Si();ts();ll();yi(k,r)}function Tl(e){return Qo(a.data.targets,e.id)}function Nl(e){return"data"in e&&Qo(a.data.targets,e.data.id)}function Cl(e){return e?function(t){var n=false;[].concat(e).forEach(function(r){if("value"in r&&t.value===e.value||"class"in r&&t.class===e.class){n=true}});return n}:function(){return true}}function kl(e,t){var r=Cl(e),i=function(e){return!r(e)},s=t?n.xgridLines:n.ygridLines,o=t?n.xgridLine:n.ygridLine;Uf.select("."+s).selectAll("."+o).filter(r).transition().duration(k).style("opacity",0).remove();if(t){sn=sn.filter(i)}else{un=un.filter(i)}}function Ll(e,t,n){var r=!La(a.data.targets),i=n||{withTransitionForAxis:r};i.withTransitionForTransform=false;ur=false;wa(e,t);hl(i)}function Al(e){var t=e.mimeType?e.mimeType:"csv";u.xhr(e.url,function(n,r){var i;if(t==="json"){i=Fo(JSON.parse(r.response),e.keys)}else{i=jo(r.response)}Yf(i)})}var u=e.d3?e.d3:"undefined"!==typeof require?require("d3"):undefined;var a={data:{},axis:{},legend:{}},f={};var h=c(["bindto"],"#chart");var p=c(["size","width"]),d=c(["size","height"]);var v=c(["padding","left"]),m=c(["padding","right"]),g=c(["padding","top"]),y=c(["padding","bottom"]);var b=c(["zoom","enabled"],false),w=c(["zoom","extent"]),E=c(["zoom","privileged"],false);var S=c(["interaction","enabled"],true);var x=c(["onmouseover"],function(){}),T=c(["onmouseout"],function(){}),N=c(["onresize"],function(){}),C=c(["onresized"],function(){});var k=c(["transition","duration"],350);l("data","data is required in config");var L=c(["data","x"]),A=c(["data","xs"],{}),O=c(["data","x_format"],"%Y-%m-%d"),M=c(["data","x_localtime"],true),_=c(["data","id_converter"],function(e){return e}),D=c(["data","names"],{}),P=c(["data","classes"],{}),H=c(["data","groups"],[]),B=c(["data","axes"],{}),j=c(["data","type"]),F=c(["data","types"],{}),I=c(["data","labels"],{}),q=c(["data","order"]),R=c(["data","regions"],{}),U=c(["data","color"]),z=c(["data","colors"],{}),W=c(["data","hide"],false),X=c(["data","filter"]),V=c(["data","selection","enabled"],false),$=c(["data","selection","grouped"],false),J=c(["data","selection","isselectable"],function(){return true}),K=c(["data","selection","multiple"],true),Q=c(["data","onclick"],function(){}),G=c(["data","onmouseover"],function(){}),Y=c(["data","onmouseout"],function(){}),Z=c(["data","onselected"],function(){}),et=c(["data","onunselected"],function(){}),tt=c(["data","ondragstart"],function(){}),nt=c(["data","ondragend"],function(){});var rt=c(["data","empty","label","text"],"");var it=c(["subchart","show"],false),st=c(["subchart","size","height"],60);var ot=c(["color","pattern"],[]),ut=c(["color","opacity"],1),at=c(["color","threshold"],{});var ft=c(["legend","show"],true),lt=c(["legend","position"],"bottom"),ct=c(["legend","inset","anchor"],"top-left"),ht=c(["legend","inset","x"],10),pt=c(["legend","inset","y"],0),dt=c(["legend","inset","step"]),vt=c(["legend","item","onclick"]),mt=c(["legend","item","onmouseover"]),gt=c(["legend","item","onmouseout"]),yt=c(["legend","equally"],false);var bt=c(["axis","rotated"],false),wt=c(["axis","x","show"],true),Et=c(["axis","x","type"],"indexed"),St=c(["axis","x","localtime"],true),xt=c(["axis","x","categories"],[]),Tt=c(["axis","x","tick","centered"],false),Nt=c(["axis","x","tick","format"]),Ct=c(["axis","x","tick","culling"],{}),kt=c(["axis","x","tick","culling","max"],10),Lt=c(["axis","x","tick","count"]),At=c(["axis","x","tick","fit"],true),Ot=c(["axis","x","tick","values"],null),Mt=c(["axis","x","tick","rotate"]),_t=c(["axis","x","max"],null),Dt=c(["axis","x","min"],null),Pt=c(["axis","x","padding"],{}),Ht=c(["axis","x","height"]),Bt=c(["axis","x","default"]),jt=c(["axis","x","label"],{}),Ft=c(["axis","y","show"],true),It=c(["axis","y","max"]),qt=c(["axis","y","min"]),Rt=c(["axis","y","center"]),Ut=c(["axis","y","label"],{}),zt=c(["axis","y","inner"],false),Wt=c(["axis","y","tick","format"]),Xt=c(["axis","y","padding"]),Vt=c(["axis","y","ticks"],10),$t=c(["axis","y2","show"],false),Jt=c(["axis","y2","max"]),Kt=c(["axis","y2","min"]),Qt=c(["axis","y2","center"]),Gt=c(["axis","y2","label"],{}),Yt=c(["axis","y2","inner"],false),Zt=c(["axis","y2","tick","format"]),en=c(["axis","y2","padding"]),tn=c(["axis","y2","ticks"],10);var nn=c(["grid","x","show"],false),rn=c(["grid","x","type"],"tick"),sn=c(["grid","x","lines"],[]),on=c(["grid","y","show"],false),un=c(["grid","y","lines"],[]),an=c(["grid","y","ticks"],10),fn=c(["grid","focus","show"],true);var ln=c(["point","show"],true),cn=c(["point","r"],2.5),hn=c(["point","focus","expand","enabled"],true),pn=c(["point","focus","expand","r"]),dn=c(["point","focus","select","r"]);var vn=c(["line","connect_null"],false);var mn=c(["bar","width"]),gn=c(["bar","width","ratio"],.6),yn=c(["bar","zerobased"],true);var bn=c(["area","zerobased"],true);var wn=c(["pie","label","show"],true),En=c(["pie","label","format"]),Sn=c(["pie","label","threshold"],.05),xn=c(["pie","sort"],true),Tn=c(["pie","expand"],true);var Nn=c(["gauge","label","show"],true),Cn=c(["gauge","label","format"]),kn=c(["gauge","expand"],true),Ln=c(["gauge","min"],0),An=c(["gauge","max"],100),On=c(["gauge","units"]),Mn=c(["gauge","width"]);var _n=c(["donut","label","show"],true),Dn=c(["donut","label","format"]),Pn=c(["donut","label","threshold"],.05),Hn=c(["donut","sort"],true),Bn=c(["donut","expand"],true),jn=c(["donut","title"],"");var Fn=c(["regions"],[]);var In=c(["tooltip","show"],true),qn=c(["tooltip","grouped"],true),Rn=c(["tooltip","format","title"]),Un=c(["tooltip","format","name"]),zn=c(["tooltip","format","value"]),Wn=c(["tooltip","contents"],function(e,t,r,i){var s=Rn?Rn:t,o=Un?Un:function(e){return e},u=zn?zn:r,a,f,l,c,h,p;for(f=0;f<e.length;f++){if(!(e[f]&&(e[f].value||e[f].value===0))){continue}if(!a){l=s?s(e[f].x):e[f].x;a="<table class='"+n.tooltip+"'>"+(l||l===0?"<tr><th colspan='2'>"+l+"</th></tr>":"")}h=o(e[f].name);c=u(e[f].value,e[f].ratio,e[f].id,e[f].index);p=lr?lr(e[f].value):i(e[f].id);a+="<tr class='"+n.tooltipName+"-"+e[f].id+"'>";a+="<td class='name'><span style='background-color:"+p+"'></span>"+h+"</td>";a+="<td class='value'>"+c+"</td>";a+="</tr>"}return a+"</table>"}),Xn=c(["tooltip","init","show"],false),Vn=c(["tooltip","init","x"],0),$n=c(["tooltip","init","position"],{top:"0px",left:"50px"});var Jn="c3-"+ +(new Date)+"-clip",Kn=Jn+"-xaxis",Qn=Jn+"-yaxis",Gn=pi(Jn),Yn=pi(Kn),Zn=pi(Qn);var er=Et==="timeseries",tr=Et.indexOf("categor")>=0,nr=function(){return!er&&(L||Ya(A))};var rr=null,ir=false,sr=false,or=false,ur=false;var ar=u.scale.category10().range(),fr=Xa(z,Ya(ot)?ot:ar,U),lr=Ya(at)?Va(ot,at):null;var cr=M?u.time.format:u.time.format.utc,hr=St?u.time.format:u.time.format.utc,pr=hr.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%-m/%-d",function(e){return e.getDay()&&e.getDate()!==1}],["%-m/%-d",function(e){return e.getDate()!==1}],["%-m/%-d",function(e){return e.getMonth()}],["%Y/%-m/%-d",function(){return true}]]);var dr=[],vr=[];var mr,gr,yr,br,wr,Er,Sr,xr,Tr;var Nr,Cr,kr,Lr,Ar,Or,Mr,_r,Dr;var Pr,Hr,Br,jr,Fr,Ir,qr,Rr;var Ur,zr,Wr,Xr,Vr,$r,Jr,Kr,Qr,Gr;var Yr={};var Zr=bt?"left":"bottom",ei=bt?zt?"top":"bottom":zt?"right":"left",ti=bt?Yt?"bottom":"top":Yt?"left":"right",ni=bt?"left":"bottom";var ri={main:function(){return"translate("+di(mr.left)+","+di(mr.top)+")"},context:function(){return"translate("+di(gr.left)+","+di(gr.top)+")"},legend:function(){return"translate("+yr.left+","+yr.top+")"},x:function(){return"translate(0,"+(bt?0:Er)+")"},y:function(){return"translate(0,"+(bt?Er:0)+")"},y2:function(){return"translate("+(bt?0:br)+","+(bt?1:0)+")"},subx:function(){return"translate(0,"+(bt?0:Sr)+")"},arc:function(){return"translate("+Lr/2+","+Ar/2+")"}};var ii=lt==="right";var si=lt==="inset";var oi=ct==="top-left"||ct==="top-right";var ui=ct==="top-left"||ct==="bottom-left";var ai=0,fi=0,li=0,ci=.15;var hi=0;var bi=30,wi=bt&&!wt?0:30,Ei=5;Dr=u.layout.pie().value(function(e){return e.values.reduce(function(e,t){return e+t.value},0)});if(!xn||!Hn){Dr.sort(null)}var jf,Ff=function(){};jf=u.svg.brush().on("brush",ul);jf.update=function(){if(zf){zf.select("."+n.brush).call(this)}return this};jf.scale=function(e){return bt?this.y(e):this.x(e)};Ff=u.behavior.zoom().on("zoomstart",function(){Ff.altDomain=u.event.sourceEvent.altKey?Ur.orgDomain():null}).on("zoom",al);Ff.scale=function(e){return bt?this.y(e):this.x(e)};Ff.orgScaleExtent=function(){var e=w?w:[1,10];return[e[0],Math.max(Xo()/e[1],e[1])]};Ff.updateScaleExtent=function(){var e=po(Ur.orgDomain())/po($f),t=this.orgScaleExtent();this.scaleExtent([t[0]*e,t[1]*e]);return this};var qf,Rf,Uf,zf,Wf,Xf,Vf;var $f;var Jf,Kf={};a.focus=function(e){function s(e){Zo(e).transition().duration(100).style("opacity",1)}var t=qf.selectAll(Pu(e)),r=t.filter(Tl),i=t.filter(Nl);a.revert();a.defocus();s(r.classed(n.focused,true));s(i);if(La(a.data.targets)){Ys(e,true)}bl(e,true)};a.defocus=function(e){function s(e){Zo(e).transition().duration(100).style("opacity",.3)}var t=qf.selectAll(Pu(e)),r=t.filter(Tl),i=t.filter(Nl);a.revert();s(r.classed(n.focused,false));s(i);if(La(a.data.targets)){Zs(e)}bl(e,false)};a.revert=function(e){function s(e){Zo(e).transition().duration(100).style("opacity",1)}var t=qf.selectAll(Pu(e)),r=t.filter(Tl),i=t.filter(Nl);s(r.classed(n.focused,false));s(i);if(La(a.data.targets)){Zs(e)}wl()};a.show=function(e,t){e=Ko(e);t=t||{};ru(e);qf.selectAll(Hu(e)).transition().style("opacity",1);if(t.withLegend){El(e)}ol({withUpdateOrgXDomain:true,withUpdateXDomain:true,withLegend:true})};a.hide=function(e,t){e=Ko(e);t=t||{};nu(e);qf.selectAll(Hu(e)).transition().style("opacity",0);if(t.withLegend){Sl(e)}ol({withUpdateOrgXDomain:true,withUpdateXDomain:true,withLegend:true})};a.toggle=function(e){Go(e)?a.hide(e):a.show(e)};a.unzoom=function(){jf.clear().update();ol({withUpdateXDomain:true})};a.zoom=function(){};a.zoom.enable=function(e){b=e;hl()};a.load=function(e){if(e.xs){Oo(e.xs)}if("classes"in e){Object.keys(e.classes).forEach(function(t){P[t]=e.classes[t]})}if("categories"in e&&tr){xt=e.categories}if("cacheIds"in e&&vo(e.cacheIds)){dl(go(e.cacheIds),e.done);return}if("unload"in e){ml(Ko(typeof e.unload==="boolean"&&e.unload?null:e.unload),function(){vl(e)})}else{vl(e)}};a.unload=function(e,t){ml(Ko(e),function(){ol({withUpdateOrgXDomain:true,withUpdateXDomain:true,withLegend:true});if(typeof t==="function"){t()}})};a.flow=function(e){var t=Ro(qo(e.columns),true),n=[],i=Xo(),o,u,f,l,c=0,h=0,p,d;a.data.targets.forEach(function(e){var r=false,i,s;for(i=0;i<t.length;i++){if(e.id===t[i].id){r=true;if(e.values[e.values.length-1]){h=e.values[e.values.length-1].index+1}c=t[i].values.length;for(s=0;s<c;s++){t[i].values[s].index=h+s;if(!er){t[i].values[s].x=h+s}}e.values=e.values.concat(t[i].values);t.splice(i,1);break}}if(!r){n.push(e.id)}});a.data.targets.forEach(function(e){var t,r;for(t=0;t<n.length;t++){if(e.id===n[t]){h=e.values[e.values.length-1].index+1;for(r=0;r<c;r++){e.values.push({id:e.id,index:h+r,x:er?Ao(h+r):h+r,value:null})}}}});if(a.data.targets.length){t.forEach(function(e){var t,n=[];for(t=a.data.targets[0].values[0].index;t<h;t++){n.push({id:e.id,index:t,x:er?Ao(t):t,value:null})}e.values.forEach(function(e){e.index+=h;if(!er){e.x+=h}});e.values=n.concat(e.values)})}a.data.targets=a.data.targets.concat(t);o=Xo();f=a.data.targets[0];l=f.values[0];if(s(e.to)){c=0;d=er?$a(e.to):e.to;f.values.forEach(function(e){if(e.x<d){c++}})}else if(s(e.length)){c=e.length}if(!i){if(er){if(f.values.length>1){p=f.values[f.values.length-1].x-l.x}else{p=l.x-co(a.data.targets)[0]}}else{p=1}u=[l.x-p,l.x];ho(null,true,true,u)}else if(i===1){if(er){p=(f.values[f.values.length-1].x-l.x)/2;u=[new Date(+l.x-p),new Date(+l.x+p)];ho(null,true,true,u)}}pl(a.data.targets);ol({flow:{index:l.index,length:c,duration:r(e.duration)?e.duration:k,done:e.done,orgDataCount:i},withLegend:true,withTransition:i>1})};a.selected=function(e){return u.merge(Uf.selectAll("."+n.shapes+Du(e)).selectAll("."+n.shape).filter(function(){return u.select(this).classed(n.SELECTED)}).map(function(e){return e.map(function(e){var t=e.__data__;return t.data?t.data:t})}))};a.select=function(e,t,r){if(!V){return}Uf.selectAll("."+n.shapes).selectAll("."+n.shape).each(function(i,o){var a=u.select(this),f=i.data?i.data.id:i.id,l=mf(this),c=$||!e||e.indexOf(f)>=0,h=!t||t.indexOf(o)>=0,p=a.classed(n.SELECTED);if(a.classed(n.line)||a.classed(n.area)){return}if(c&&h){if(J(i)&&!p){l(true,a.classed(n.SELECTED,true),i,o)}}else if(s(r)&&r){if(p){l(false,a.classed(n.SELECTED,false),i,o)}}})};a.unselect=function(e,t){if(!V){return}Uf.selectAll("."+n.shapes).selectAll("."+n.shape).each(function(r,i){var s=u.select(this),o=r.data?r.data.id:r.id,a=mf(this),f=$||!e||e.indexOf(o)>=0,l=!t||t.indexOf(i)>=0,c=s.classed(n.SELECTED);if(s.classed(n.line)||s.classed(n.area)){return}if(f&&l){if(J(r)){if(c){a(false,s.classed(n.SELECTED,false),r,i)}}}})};a.transform=function(e,t){var n=["pie","donut"].indexOf(e)>=0?{withTransform:true}:null;Ll(t,e,n)};a.groups=function(e){if(i(e)){return H}H=e;ol();return H};a.xgrids=function(e){if(!e){return sn}sn=e;ol();return sn};a.xgrids.add=function(e){if(!e){return}return a.xgrids(sn.concat(e))};a.xgrids.remove=function(e){kl(e,true)};a.ygrids=function(e){if(!e){return un}un=e;ol();return un};a.ygrids.add=function(e){if(!e){return}return a.ygrids(un.concat(e))};a.ygrids.remove=function(e){kl(e,false)};a.regions=function(e){if(!e){return Fn}Fn=e;ol();return Fn};a.regions.add=function(e){if(!e){return Fn}Fn=Fn.concat(e);ol();return Fn};a.regions.remove=function(e){var t,r,i;e=e||{};t=rf(e,"duration",k);r=rf(e,"classes",[n.region]);i=Uf.select("."+n.regions).selectAll(r.map(function(e){return"."+e}));(t?i.transition().duration(t):i).style("opacity",0).remove();Fn=Fn.filter(function(e){var t=false;if(!e.class){return true}e.class.split(" ").forEach(function(e){if(r.indexOf(e)>=0){t=true}});return!t});return Fn};a.data.get=function(e){var t=a.data.getAsTarget(e);return s(t)?t.values.map(function(e){return e.value}):undefined};a.data.getAsTarget=function(e){var t=a.data.targets.filter(function(t){return t.id===e});return t.length>0?t[0]:undefined};a.data.names=function(e){if(!arguments.length){return D}Object.keys(e).forEach(function(t){D[t]=e[t]});ol({withLegend:true});return D};a.data.colors=function(e){if(!arguments.length){return z}Object.keys(e).forEach(function(t){z[t]=e[t]});ol({withLegend:true});return z};a.category=function(e,t){if(arguments.length>1){xt[e]=t;ol()}return xt[e]};a.categories=function(e){if(!arguments.length){return xt}xt=e;ol();return xt};a.color=fr;a.x=function(e){if(arguments.length){Po(a.data.targets,e);ol({withUpdateOrgXDomain:true,withUpdateXDomain:true})}return a.data.xs};a.xs=function(e){if(arguments.length){Ho(a.data.targets,e);ol({withUpdateOrgXDomain:true,withUpdateXDomain:true})}return a.data.xs};a.axis.labels=function(e){if(arguments.length){Object.keys(e).forEach(function(t){ds(t,e[t])});Us()}};a.axis.max=function(e){if(arguments.length){if(typeof e==="object"){if(r(e.x)){_t=e.x}if(r(e.y)){It=e.y}if(r(e.y2)){Jt=e.y2}}else{It=Jt=e}ol({withUpdateOrgXDomain:true,withUpdateXDomain:true})}};a.axis.min=function(e){if(arguments.length){if(typeof e==="object"){if(r(e.x)){Dt=e.x}if(r(e.y)){qt=e.y}if(r(e.y2)){Kt=e.y2}}else{qt=Kt=e}ol({withUpdateOrgXDomain:true,withUpdateXDomain:true})}};a.axis.range=function(e){if(arguments.length){if(typeof e.max!=="undefined"){a.axis.max(e.max)}if(typeof e.min!=="undefined"){a.axis.min(e.min)}}};a.legend.show=function(e){El(Ko(e));hl({withLegend:true})};a.legend.hide=function(e){Sl(Ko(e));hl({withLegend:true})};a.resize=function(e){p=e?e.width:null;d=e?e.height:null;a.flush()};a.flush=function(){hl({withLegend:true,withTransition:false,withTransitionForTransform:false})};a.destroy=function(){a.data.targets=undefined;a.data.xs={};Vf.classed("c3",false).html("");e.onresize=null};if(t.data.url){Al(t.data)}else if(t.data.json){Yf(Fo(t.data.json,t.data.keys))}else if(t.data.rows){Yf(Io(t.data.rows))}else if(t.data.columns){Yf(qo(t.data.columns))}else{throw Error("url or json or rows or columns is required.")}return a};if(typeof define==="function"&&define.amd){define("c3",["d3"],t)}else if("undefined"!==typeof exports&&"undefined"!==typeof module){module.exports=t}else{e.c3=t}})(window)
